/**
 * @file calculator.cpp
 * @brief Консольное приложение "Базовый калькулятор" с поддержкой основных арифметических операций
 * 
 * Программа предоставляет интерактивное меню для выполнения следующих операций:
 * 1. Сложение двух чисел
 * 2. Вычитание двух чисел
 * 3. Умножение двух чисел
 * 4. Деление двух чисел (с проверкой деления на ноль)
 * 5. Вычисление остатка от деления (с целочисленным преобразованием)
 * 
 * @note Особенности реализации:
 * - Поддержка работы с числами двойной точности (double)
 * - Циклический интерфейс с возможностью повторных вычислений
 * - Защита от некорректного ввода операций
 * - Обработка ошибки деления на ноль
 * - Автоматическое преобразование типов для операции остатка
 * - Локализованный интерфейс на русском языке
 * 
 * @warning Для операции остатка от деления происходит неявное преобразование в целые числа
 * 
 * @section usage Пример использования
 * @code
 * Меню калькулятора:
 * 1. Сложение
 * 2. Вычитание
 * 3. Умножение
 * 4. Деление
 * 5. Остаток от деления
 * Выберите операцию (1-5): 4
 * Введите первое число: 15
 * Введите второе число: 4
 * Результат: 15 / 4 = 3.75
 * @endcode
 * 
 * @author Дуплей Максим Игоревич
 * @version 1.0
 * @date 2025-08-01
 */

#include <iostream>
#include <windows.h> // Для работы с кодовыми страницами
#include <conio.h>   // Для _getch()

using namespace std;

int main() {
    // Для версий Windows 10 и выше можно использовать UTF-8 для работы с Кириллицей
    SetConsoleOutputCP(CP_UTF8);
    SetConsoleCP(CP_UTF8);

    int choice;
    double num1, num2, result;
    char repeat;

    do {
        cout << "\nМеню калькулятора:\n";
        cout << "1. Сложение\n";
        cout << "2. Вычитание\n";
        cout << "3. Умножение\n";
        cout << "4. Деление\n";
        cout << "5. Остаток от деления\n";
        cout << "Выберите операцию (1-5): ";
        cin >> choice;

        // Проверка корректности выбора операции
        if (choice < 1 || choice > 5) {
            cout << "Ошибка: неверный выбор операции!\n";
            continue;
        }

        cout << "Введите первое число: ";
        cin >> num1;
        cout << "Введите второе число: ";
        cin >> num2;

        // Выполнение операции в зависимости от выбора
        switch (choice) {
            case 1:
                result = num1 + num2;
                cout << "Результат: " << num1 << " + " << num2 << " = " << result << endl;
                break;
                
            case 2:
                result = num1 - num2;
                cout << "Результат: " << num1 << " - " << num2 << " = " << result << endl;
                break;
                
            case 3:
                result = num1 * num2;
                cout << "Результат: " << num1 << " * " << num2 << " = " << result << endl;
                break;
                
            case 4:
                if (num2 == 0) {
                    cout << "Ошибка: деление на ноль!\n";
                } else {
                    result = num1 / num2;
                    cout << "Результат: " << num1 << " / " << num2 << " = " << result << endl;
                }
                break;
                
            case 5:
                if (num2 == 0) {
                    cout << "Ошибка: деление на ноль!\n";
                } else {
                    // Для остатка используем целочисленные преобразования
                    result = static_cast<int>(num1) % static_cast<int>(num2);
                    cout << "Результат: " << static_cast<int>(num1) << " % " << static_cast<int>(num2) 
                         << " = " << result << endl;
                }
                break;
        }

        // Запрос на повторение вычислений
        cout << "\nХотите выполнить еще одну операцию? (y/n): ";
        cin >> repeat;

    } while (repeat == 'y' || repeat == 'Y');

    cout << "Программа завершена. До свидания!\n";
    return 0;
}
