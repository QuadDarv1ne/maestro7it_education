# Шахматный движок - Документация

## Обзор проекта

Это чистый и модульный шахматный движок, написанный на C++. Проект реализует классические шахматы с возможностью игры человек против компьютера или двух игроков друг против друга в терминале.

## Архитектура проекта

### Основные модули:

1. **board** - Представление шахматной доски и фигур
2. **logic** - Проверка правил и генерация ходов  
3. **engine** - Алгоритмы искусственного интеллекта
4. **ui** - Терминальный интерфейс пользователя

## Структура классов

### Piece (Фигура)

- Представляет шахматную фигуру
- Атрибуты: тип фигуры, цвет
- Методы: получение символа, значения, имени

### Board (Доска)

- Управляет состоянием шахматной доски 8x8
- Отслеживает текущего игрока, права рокировки
- Обрабатывает специальные ходы (взятие на проходе, превращение)

### MoveGenerator (Генератор ходов)

- Генерирует все легальные ходы для текущей позиции
- Проверяет корректность ходов
- Обрабатывает специальные ходы

### GameRules (Правила игры)

- Проверяет соблюдение шахматных правил
- Определяет состояние игры (шах, мат, пат)
- Управляет завершением партии

### Minimax (Алгоритм ИИ)

- Реализует алгоритм минимакс с альфа-бета отсечением
- Осуществляет поиск лучшего хода для компьютера
- Поддерживает ограничение по времени и глубине поиска

### PositionEvaluator (Оценка позиции)

- Оценивает текущую позицию на доске
- Учитывает материальный баланс и позиционные факторы
- Использует таблицы значений для разных этапов игры

### ConsoleUI (Консольный интерфейс)

- Обеспечивает взаимодействие с пользователем
- Обрабатывает ввод ходов в алгебраической нотации
- Отображает доску и игровую информацию

## Форматы записи ходов

### Алгебраическая нотация:

- `e2-e4` - ход пешки с e2 на e4
- `Nf3` - ход коня на f3
- `O-O` - короткая рокировка
- `O-O-O` - длинная рокировка

## Специальные ходы

### Рокировка:
- Короткая: король перемещается на 2 поля в сторону ладьи
- Длинная: король перемещается на 2 поля в противоположную сторону

### Взятие на проходе:

- Пешка может взять пешку противника, которая сделала двойной ход

### Превращение пешки:

- При достижении последней горизонтали пешка превращается в любую фигуру

## Алгоритм ИИ

### Минимакс с альфа-бета отсечением:

1. Рекурсивно исследует дерево ходов на заданную глубину
2. Оценивает позиции с помощью PositionEvaluator
3. Выбирает ход, максимизирующий преимущество для компьютера

### Параметры поиска:

- Глубина поиска (количество полуходов)
- Ограничение по времени
- Упорядочивание ходов для оптимизации

## Сборка и запуск

### Требования:

- Компилятор C++17 или новее
- CMake 3.10 или новее

### Сборка:

```bash
# Windows
build.bat

# Linux/macOS  
./build.sh
```

### Запуск:

```bash
# Windows
cd build
chess_engine.exe

# Linux/macOS
cd build
./chess_engine
```

## Режимы игры

1. **Человек против человека** - два игрока за одним компьютером
2. **Человек против компьютера** - игра с ИИ различной сложности
3. **Компьютер против компьютера** - демонстрация игры ИИ

## Настройки

- Уровень сложности ИИ (глубина поиска 1-6)
- Выбор цвета фигур для игрока
- Время на обдумывание хода

## Будущие улучшения

- Графический интерфейс
- Поддержка сетевой игры
- Экспорт/импорт в формате PGN
- Интеграция с шахматными базами данных