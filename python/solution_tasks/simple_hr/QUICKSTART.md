"""
Краткое руководство по быстрому старту проекта Simple HR.
"""

# БЫСТРЫЙ СТАРТ

## 1. Установка зависимостей

```bash
pip install -r requirements.txt
```

## 2. Проверка готовности проекта

```bash
python check_setup.py
```

Этот скрипт проверит:
- Версию Python (требуется 3.8+)
- Установленные пакеты
- Конфигурационные файлы
- Структуру директорий
- Переменные окружения
- Подключение к базе данных

## 3. Инициализация базы данных

```bash
python scripts/seed_data.py
```

Этот скрипт:
- Создаст все таблицы
- Заполнит базу тестовыми данными:
  - 4 пользователя (1 admin + 3 HR)
  - 8 подразделений
  - 20 должностей
  - 50 сотрудников
  - ~35 приказов
  - 40 отпусков
  - 20 уведомлений
  - 50 записей аудита

## 4. Запуск приложения

```bash
python run.py
```

Приложение будет доступно по адресу: http://localhost:5000

## 5. Вход в систему

**Администратор:**
- Логин: `admin`
- Пароль: `admin123`

**HR менеджер:**
- Логин: `hr1` / `hr2` / `hr3`
- Пароль: `hr1123` / `hr2123` / `hr3123`

---

## Структура проекта

```
simple_hr/
├── app/                    # Основное приложение
│   ├── __init__.py        # Инициализация Flask
│   ├── models.py          # Модели базы данных
│   ├── forms.py           # WTForms формы
│   ├── routes/            # Маршруты (blueprints)
│   ├── templates/         # HTML шаблоны
│   ├── static/            # CSS, JS, изображения
│   └── utils/             # Утилиты и хелперы
├── instance/              # Конфигурация (не в git)
│   └── config.py          # Настройки приложения
├── scripts/               # Вспомогательные скрипты
│   └── seed_data.py       # Заполнение БД
├── logs/                  # Логи приложения
├── uploads/               # Загруженные файлы
├── .env                   # Переменные окружения (не в git)
├── requirements.txt       # Зависимости Python
├── run.py                 # Точка входа
└── check_setup.py         # Проверка готовности
```

---

## Настройка базы данных

### SQLite (по умолчанию)

Не требует дополнительной настройки. База создастся автоматически в `instance/simple_hr.db`

### MySQL

1. Создайте базу данных:
```sql
CREATE DATABASE simple_hr_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

2. Отредактируйте `.env`:
```env
DATABASE_URL=mysql+pymysql://user:password@localhost/simple_hr_db
```

3. Запустите инициализацию:
```bash
python scripts/seed_data.py
```

---

## Основные функции

- ✅ Управление сотрудниками (CRUD)
- ✅ Управление подразделениями и должностями
- ✅ Приказы (приём, перевод, увольнение)
- ✅ Отпуска с календарём
- ✅ Отчёты и аналитика
- ✅ Импорт/экспорт CSV
- ✅ Система уведомлений
- ✅ Журнал аудита
- ✅ Поиск и фильтрация
- ✅ Дашборд с графиками

---

## Устранение неполадок

### Ошибка импорта модулей

```bash
pip install -r requirements.txt
```

### База данных не создаётся

Убедитесь, что:
1. Установлена правильная версия SQLAlchemy
2. Для MySQL установлен PyMySQL
3. Есть права на запись в директорию `instance/`

### Порт 5000 занят

Измените порт в `run.py`:
```python
app.run(debug=True, host='127.0.0.1', port=5001)
```

---

## Полезные команды

```bash
# Проверка версии Python
python --version

# Установка конкретного пакета
pip install flask

# Просмотр установленных пакетов
pip list

# Обновление всех пакетов
pip install --upgrade -r requirements.txt

# Создание резервной копии БД (SQLite)
cp instance/simple_hr.db instance/simple_hr.db.backup
```

---

## Дополнительная информация

Полная документация: см. `README.md`

Вопросы и поддержка: maksimqwe42@mail.ru
