{% extends "base.html" %}

{% block title %}Демонстрация новых функций - Simple HR{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="animate-fade-in-down">
                <i class="bi bi-stars"></i> Демонстрация новых функций
            </h1>
            <p class="text-muted animate-fade-in-up animate-delay-100">
                Познакомьтесь с новыми возможностями Simple HR System
            </p>
        </div>
    </div>

    <!-- Секция: Темная тема -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card animate-fade-in-up animate-delay-200">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-moon-stars"></i> Темная тема
                    </h5>
                </div>
                <div class="card-body">
                    <p>Переключайте между светлой и темной темой с помощью кнопки в навигации.</p>
                    <button class="btn btn-primary" onclick="themeSwitcher.toggleTheme()">
                        <i class="bi bi-palette"></i> Переключить тему
                    </button>
                    <button class="btn btn-secondary" onclick="showCurrentTheme()">
                        <i class="bi bi-info-circle"></i> Показать текущую тему
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Секция: Уведомления -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card animate-fade-in-up animate-delay-300 hover-lift">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-bell"></i> Система уведомлений
                    </h5>
                </div>
                <div class="card-body">
                    <p>Показывайте красивые уведомления для пользователей.</p>
                    <div class="btn-group mb-3" role="group">
                        <button class="btn btn-success" onclick="showSuccess('Операция выполнена успешно!')">
                            <i class="bi bi-check-circle"></i> Success
                        </button>
                        <button class="btn btn-danger" onclick="showError('Произошла ошибка!')">
                            <i class="bi bi-x-circle"></i> Error
                        </button>
                        <button class="btn btn-warning" onclick="showWarning('Внимание!')">
                            <i class="bi bi-exclamation-triangle"></i> Warning
                        </button>
                        <button class="btn btn-info" onclick="showInfo('Полезная информация')">
                            <i class="bi bi-info-circle"></i> Info
                        </button>
                    </div>
                    <div>
                        <button class="btn btn-outline-primary" onclick="showCustomNotification()">
                            <i class="bi bi-stars"></i> Кастомное уведомление
                        </button>
                        <button class="btn btn-outline-danger" onclick="notificationManager.removeAll()">
                            <i class="bi bi-trash"></i> Удалить все
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Секция: Анимации -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card animate-fade-in-up animate-delay-400">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-magic"></i> Анимации
                    </h5>
                </div>
                <div class="card-body">
                    <p>Примеры различных анимаций:</p>
                    
                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="card hover-lift" id="animCard1">
                                <div class="card-body text-center">
                                    <i class="bi bi-arrow-up icon-xl text-primary"></i>
                                    <h6>Fade In Up</h6>
                                    <button class="btn btn-sm btn-outline-primary" onclick="animateCard('animCard1', 'animate-fade-in-up')">
                                        Анимировать
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="card hover-grow" id="animCard2">
                                <div class="card-body text-center">
                                    <i class="bi bi-zoom-in icon-xl text-success"></i>
                                    <h6>Zoom In</h6>
                                    <button class="btn btn-sm btn-outline-success" onclick="animateCard('animCard2', 'animate-zoom-in')">
                                        Анимировать
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="card hover-rotate" id="animCard3">
                                <div class="card-body text-center">
                                    <i class="bi bi-arrow-clockwise icon-xl text-warning"></i>
                                    <h6>Bounce In</h6>
                                    <button class="btn btn-sm btn-outline-warning" onclick="animateCard('animCard3', 'animate-bounce-in')">
                                        Анимировать
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Секция: Валидация форм -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card animate-fade-in-up animate-delay-500">
                <div class="card-header bg-warning">
                    <h5 class="mb-0">
                        <i class="bi bi-check2-square"></i> Валидация форм
                    </h5>
                </div>
                <div class="card-body">
                    <p>Автоматическая валидация с красивыми сообщениями об ошибках:</p>
                    
                    <form id="demoForm" data-validate>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="demoName" class="form-label">ФИО *</label>
                                <input type="text" 
                                       class="form-control" 
                                       id="demoName" 
                                       required 
                                       data-validate-minlength="3"
                                       placeholder="Иван Иванов">
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="demoEmail" class="form-label">Email *</label>
                                <input type="email" 
                                       class="form-control" 
                                       id="demoEmail" 
                                       required 
                                       data-validate-email
                                       placeholder="ivan@example.com">
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="demoPhone" class="form-label">Телефон *</label>
                                <input type="tel" 
                                       class="form-control" 
                                       id="demoPhone" 
                                       required 
                                       data-validate-phone
                                       placeholder="+7 (999) 123-45-67">
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="demoAge" class="form-label">Возраст *</label>
                                <input type="number" 
                                       class="form-control" 
                                       id="demoAge" 
                                       required 
                                       data-validate-min="18" 
                                       data-validate-max="100"
                                       placeholder="25">
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="demoPassport" class="form-label">Паспорт</label>
                            <input type="text" 
                                   class="form-control" 
                                   id="demoPassport" 
                                   data-validate-passport
                                   placeholder="1234 567890">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-check-circle"></i> Отправить
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="document.getElementById('demoForm').reset()">
                            <i class="bi bi-arrow-counterclockwise"></i> Сбросить
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Секция: Улучшенные таблицы -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card animate-fade-in-up animate-delay-600">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-table"></i> Улучшенные таблицы
                    </h5>
                </div>
                <div class="card-body">
                    <p>Таблица с сортировкой, поиском и пагинацией:</p>
                    
                    <table class="table table-striped table-hover" id="demoTable" data-enhanced-table>
                        <thead>
                            <tr>
                                <th>№</th>
                                <th>Сотрудник</th>
                                <th>Должность</th>
                                <th>Отдел</th>
                                <th>Email</th>
                                <th class="no-sort">Статус</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for i in range(1, 26) %}
                            <tr>
                                <td>{{ i }}</td>
                                <td>Сотрудник {{ i }}</td>
                                <td>Должность {{ loop.cycle('A', 'B', 'C', 'D') }}</td>
                                <td>Отдел {{ loop.cycle('IT', 'HR', 'Sales', 'Marketing') }}</td>
                                <td>employee{{ i }}@company.com</td>
                                <td>
                                    <span class="badge bg-{{ loop.cycle('success', 'warning', 'info', 'secondary') }}">
                                        {{ loop.cycle('Активен', 'В отпуске', 'На больничном', 'Удаленно') }}
                                    </span>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Секция: Загрузка и состояния -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card animate-fade-in-up animate-delay-700">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-hourglass-split"></i> Состояния загрузки
                    </h5>
                </div>
                <div class="card-body">
                    <p>Различные индикаторы загрузки:</p>
                    
                    <div class="mb-3">
                        <button class="btn btn-primary" onclick="showOverlayDemo()">
                            <i class="bi bi-arrow-repeat"></i> Показать оверлей
                        </button>
                        <button class="btn btn-success" id="btnLoadingDemo" onclick="showButtonLoadingDemo()">
                            <i class="bi bi-arrow-repeat"></i> Загрузка кнопки
                        </button>
                    </div>
                    
                    <div class="mb-3">
                        <h6>Skeleton загрузка:</h6>
                        <div id="skeletonDemo"></div>
                        <button class="btn btn-info btn-sm" onclick="showSkeletonDemo()">
                            <i class="bi bi-eye"></i> Показать skeleton
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Показать текущую тему
    function showCurrentTheme() {
        const theme = themeSwitcher.getTheme();
        showInfo(`Текущая тема: ${theme === 'dark' ? 'Темная' : 'Светлая'}`);
    }

    // Кастомное уведомление
    function showCustomNotification() {
        notificationManager.show('Это кастомное уведомление с настройками!', 'info', {
            title: 'Демонстрация',
            duration: 7000,
            closable: true
        });
    }

    // Анимация карточек
    function animateCard(cardId, animClass) {
        const card = document.getElementById(cardId);
        card.classList.remove('animate-fade-in-up', 'animate-zoom-in', 'animate-bounce-in', 'animate-shake');
        
        // Небольшая задержка для перезапуска анимации
        setTimeout(() => {
            card.classList.add(animClass);
        }, 10);
    }

    // Демо оверлея загрузки
    function showOverlayDemo() {
        window.loadingManager.showOverlay('Загрузка данных...');
        
        setTimeout(() => {
            window.loadingManager.hideOverlay();
            showSuccess('Загрузка завершена!');
        }, 3000);
    }

    // Демо загрузки кнопки
    function showButtonLoadingDemo() {
        const btn = document.getElementById('btnLoadingDemo');
        window.loadingManager.showButtonLoading(btn, 'Загрузка...');
        
        setTimeout(() => {
            window.loadingManager.hideButtonLoading(btn, '<i class="bi bi-check-circle"></i> Готово!');
            
            setTimeout(() => {
                btn.innerHTML = '<i class="bi bi-arrow-repeat"></i> Загрузка кнопки';
            }, 2000);
        }, 3000);
    }

    // Демо skeleton загрузки
    function showSkeletonDemo() {
        const container = document.getElementById('skeletonDemo');
        window.loadingManager.showSkeleton(container, 'cards', 3);
        
        setTimeout(() => {
            container.innerHTML = `
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h6>Карточка 1</h6>
                                <p>Контент загружен!</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h6>Карточка 2</h6>
                                <p>Контент загружен!</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h6>Карточка 3</h6>
                                <p>Контент загружен!</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }, 2000);
    }

    // Обработка успешной отправки формы
    document.getElementById('demoForm').addEventListener('submit', function(e) {
        e.preventDefault();
        showSuccess('Форма успешно отправлена!', {
            title: 'Успех',
            duration: 3000
        });
    });
</script>
{% endblock %}
