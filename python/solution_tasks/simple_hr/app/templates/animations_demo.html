{% extends "base.html" %}

{% block title %}Демо анимаций{% endblock %}

{% block content %}
<div class="container py-4">
    <h1 class="mb-4">
        <i class="bi bi-magic"></i>
        Демонстрация анимаций и загрузок
    </h1>

    <!-- Loading Overlay Demo -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0"><i class="bi bi-hourglass-split"></i> Overlay Loading</h5>
        </div>
        <div class="card-body">
            <button class="btn btn-primary" onclick="demoOverlay()">
                <i class="bi bi-play-fill"></i> Показать оверлей загрузки
            </button>
        </div>
    </div>

    <!-- Button Loading States -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0"><i class="bi bi-check2-circle"></i> Button Loading States</h5>
        </div>
        <div class="card-body">
            <button class="btn btn-success me-2" id="btn-demo-1" onclick="demoButtonLoading('btn-demo-1')">
                <i class="bi bi-cloud-upload"></i> Загрузить данные
            </button>
            <button class="btn btn-info me-2" id="btn-demo-2" onclick="demoButtonLoading('btn-demo-2')">
                <i class="bi bi-save"></i> Сохранить
            </button>
            <button class="btn btn-warning" id="btn-demo-3" onclick="demoButtonLoading('btn-demo-3')">
                <i class="bi bi-send"></i> Отправить
            </button>
        </div>
    </div>

    <!-- Skeleton Loaders -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0"><i class="bi bi-layout-text-window-reverse"></i> Skeleton Loaders</h5>
        </div>
        <div class="card-body">
            <div class="btn-group mb-3" role="group">
                <button class="btn btn-outline-primary" onclick="demoSkeleton('table')">
                    <i class="bi bi-table"></i> Table Skeleton
                </button>
                <button class="btn btn-outline-primary" onclick="demoSkeleton('cards')">
                    <i class="bi bi-card-list"></i> Cards Skeleton
                </button>
                <button class="btn btn-outline-primary" onclick="demoSkeleton('list')">
                    <i class="bi bi-list-ul"></i> List Skeleton
                </button>
            </div>
            <div id="skeleton-demo-area" class="border rounded p-3 bg-light">
                <p class="text-muted text-center">Нажмите кнопку выше, чтобы увидеть скелетон</p>
            </div>
        </div>
    </div>

    <!-- Success/Error Animations -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0"><i class="bi bi-emoji-smile"></i> Success & Error Animations</h5>
        </div>
        <div class="card-body">
            <button class="btn btn-success me-2" onclick="loadingManager.showSuccess('Операция выполнена успешно!')">
                <i class="bi bi-check-circle"></i> Показать успех
            </button>
            <button class="btn btn-danger" onclick="loadingManager.showError('Произошла ошибка!')">
                <i class="bi bi-exclamation-triangle"></i> Показать ошибку
            </button>
        </div>
    </div>

    <!-- Animation Classes Demo -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0"><i class="bi bi-stars"></i> CSS Animations</h5>
        </div>
        <div class="card-body">
            <div class="row g-3">
                <div class="col-md-3">
                    <button class="btn btn-primary w-100 fade-in">
                        <i class="bi bi-arrow-down-circle"></i> Fade In
                    </button>
                </div>
                <div class="col-md-3">
                    <button class="btn btn-info w-100 slide-in-bottom">
                        <i class="bi bi-arrow-up-circle"></i> Slide In
                    </button>
                </div>
                <div class="col-md-3">
                    <button class="btn btn-warning w-100 bounce-in">
                        <i class="bi bi-arrow-down-up"></i> Bounce In
                    </button>
                </div>
                <div class="col-md-3">
                    <button class="btn btn-success w-100 pulse-animation">
                        <i class="bi bi-activity"></i> Pulse
                    </button>
                </div>
            </div>
            
            <hr class="my-4">
            
            <div class="row g-3">
                <div class="col-md-4">
                    <div class="card hover-scale smooth-transition">
                        <div class="card-body text-center">
                            <i class="bi bi-hand-index fa-2x text-primary mb-2"></i>
                            <p class="mb-0">Hover Scale</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card glow">
                        <div class="card-body text-center">
                            <i class="bi bi-lightbulb fa-2x text-warning mb-2"></i>
                            <p class="mb-0">Glow Effect</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <button class="btn btn-primary w-100 ripple">
                        <i class="bi bi-water"></i> Ripple Effect
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Progress Bar Demo -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0"><i class="bi bi-speedometer2"></i> Progress Bars</h5>
        </div>
        <div class="card-body">
            <button class="btn btn-primary mb-3" onclick="demoProgress()">
                <i class="bi bi-play-fill"></i> Запустить прогресс
            </button>
            <div id="progress-demo"></div>
        </div>
    </div>

    <!-- Typing Indicator -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0"><i class="bi bi-chat-dots"></i> Typing Indicator</h5>
        </div>
        <div class="card-body">
            <div class="border rounded p-3 bg-light">
                <div class="typing-indicator">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <span class="ms-2 text-muted">Пользователь печатает...</span>
            </div>
        </div>
    </div>

    <!-- AJAX Demo -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0"><i class="bi bi-cloud-download"></i> AJAX with Loading</h5>
        </div>
        <div class="card-body">
            <button class="btn btn-primary" onclick="demoAjax()">
                <i class="bi bi-download"></i> Загрузить данные через AJAX
            </button>
            <div id="ajax-result" class="mt-3"></div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    // Demo functions

    function demoOverlay() {
        loadingManager.showOverlay('Загрузка данных...');
        setTimeout(() => {
            loadingManager.hideOverlay();
            loadingManager.showSuccess('Данные загружены!');
        }, 2000);
    }

    function demoButtonLoading(btnId) {
        const btn = document.getElementById(btnId);
        loadingManager.showButtonLoading(btn);
        
        setTimeout(() => {
            loadingManager.hideButtonLoading(btn);
            loadingManager.showSuccess('Готово!');
        }, 2000);
    }

    function demoSkeleton(type) {
        const area = document.getElementById('skeleton-demo-area');
        loadingManager.showSkeleton(area, type, type === 'table' ? 5 : type === 'cards' ? 4 : 5);
        
        setTimeout(() => {
            let content = '';
            if (type === 'table') {
                content = `
                    <table class="table">
                        <thead><tr><th>ID</th><th>Название</th><th>Статус</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>Элемент 1</td><td><span class="badge bg-success">Активен</span></td></tr>
                            <tr><td>2</td><td>Элемент 2</td><td><span class="badge bg-warning">Ожидание</span></td></tr>
                            <tr><td>3</td><td>Элемент 3</td><td><span class="badge bg-success">Активен</span></td></tr>
                        </tbody>
                    </table>
                `;
            } else if (type === 'cards') {
                content = `
                    <div class="row">
                        <div class="col-md-3"><div class="card"><div class="card-body"><h5>Карточка 1</h5><p>Содержимое</p></div></div></div>
                        <div class="col-md-3"><div class="card"><div class="card-body"><h5>Карточка 2</h5><p>Содержимое</p></div></div></div>
                        <div class="col-md-3"><div class="card"><div class="card-body"><h5>Карточка 3</h5><p>Содержимое</p></div></div></div>
                        <div class="col-md-3"><div class="card"><div class="card-body"><h5>Карточка 4</h5><p>Содержимое</p></div></div></div>
                    </div>
                `;
            } else {
                content = `
                    <div class="list-group">
                        <div class="list-group-item">Элемент списка 1</div>
                        <div class="list-group-item">Элемент списка 2</div>
                        <div class="list-group-item">Элемент списка 3</div>
                        <div class="list-group-item">Элемент списка 4</div>
                    </div>
                `;
            }
            loadingManager.hideSkeleton(area, content);
        }, 2000);
    }

    function demoProgress() {
        const progressDiv = document.getElementById('progress-demo');
        let progress = 0;
        
        const interval = setInterval(() => {
            progress += 10;
            progressDiv.innerHTML = loadingManager.createProgressBar(progress, 'Загрузка файлов');
            
            if (progress >= 100) {
                clearInterval(interval);
                setTimeout(() => {
                    loadingManager.showSuccess('Загрузка завершена!');
                }, 500);
            }
        }, 300);
    }

    async function demoAjax() {
        const resultDiv = document.getElementById('ajax-result');
        resultDiv.innerHTML = '';
        
        // Simulate AJAX request
        loadingManager.showOverlay('Загрузка через AJAX...');
        
        setTimeout(() => {
            loadingManager.hideOverlay();
            resultDiv.innerHTML = `
                <div class="alert alert-success fade-in" role="alert">
                    <i class="bi bi-check-circle me-2"></i>
                    <strong>Успех!</strong> Данные успешно загружены через AJAX.
                    <hr>
                    <p class="mb-0">Timestamp: ${new Date().toLocaleString('ru-RU')}</p>
                </div>
            `;
        }, 1500);
    }

    // Add shake animation on error demo button
    document.querySelectorAll('.btn-danger').forEach(btn => {
        btn.addEventListener('click', function() {
            this.classList.add('shake');
            setTimeout(() => {
                this.classList.remove('shake');
            }, 500);
        });
    });
</script>
{% endblock %}
