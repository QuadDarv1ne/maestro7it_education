# Документация системы управления задачами

## Обзор

Система управления задачами - это продвинутое веб-приложение, созданное с использованием фреймворка Reflex. Приложение предоставляет пользователю возможность создавать, отслеживать и управлять задачами с различными атрибутами, включая расширенные функции управления проектами.

## Архитектура приложения

### Состояние (State)

Класс `State` управляет состоянием всего приложения:

- `tasks`: список всех задач в системе
- `team_members`: список членов команды для назначения задач
- `new_task_*`: переменные для хранения значений формы добавления новой задачи
- `filter_*`: переменные для фильтрации задач
- `task_counter`: счетчик для генерации уникальных ID задач
- `selected_tasks`: список ID выбранных задач для массовых операций
- `calendar_*`: переменные для управления календарным видом
- `show_*`: флаги для отображения различных панелей

### Модель задачи (Task)

Класс `Task` представляет собой расширенную модель задачи с полями:

- `id`: уникальный идентификатор задачи
- `title`: название задачи
- `description`: описание задачи
- `priority`: приоритет задачи (Low, Normal, High, Critical)
- `status`: статус задачи (Pending, In Progress, Completed, Cancelled)
- `due_date`: дата выполнения
- `created_at`: дата создания
- `assigned_to`: имя исполнителя
- `category`: категория задачи (Work, Personal, Health, Finance, Education, Other)
- `dependencies`: список ID задач, от которых зависит текущая задача
- `dependent_tasks`: список ID задач, зависящих от текущей задачи
- `parent_id`: ID родительской задачи (для подзадач)
- `sub_tasks`: список ID подзадач
- `progress`: прогресс выполнения задачи (0-100%)

## Расширенные функции управления

### Аутентификация пользователей
- `login()`: вход пользователя в систему
- `logout()`: выход пользователя из системы
- `load_user_tasks()`: загрузка задач конкретного пользователя
- `save_user_tasks()`: сохранение задач конкретного пользователя

### Добавление и управление задачами
- `add_task()`: создает новую задачу на основе значений формы
- `create_sub_task()`: создает подзадачу для родительской задачи
- `update_task_progress()`: обновляет прогресс задачи
- `calculate_sub_task_progress()`: автоматически рассчитывает прогресс родительской задачи

### Управление зависимостями
- `add_dependency()`: добавляет зависимость между задачами
- `remove_dependency()`: удаляет зависимость
- `get_task_dependencies()`: возвращает список задач, от которых зависит текущая
- `get_dependent_tasks()`: возвращает список задач, зависящих от текущей
- `can_start_task()`: проверяет, можно ли начать выполнение задачи

### Массовые операции
- `toggle_task_selection()`: переключает выбор задачи
- `select_all_filtered_tasks()`: выбирает все отфильтрованные задачи
- `bulk_update_status()`: массовое обновление статуса
- `bulk_assign_to_member()`: массовое назначение исполнителей
- `bulk_delete_tasks()`: массовое удаление задач

### Фильтрация и сортировка
- Расширенные фильтры по датам (с, по, сегодня)
- Поиск по описанию и исполнителю
- Фильтры по статусу завершения и просроченным задачам
- Сортировка по различным полям

### Календарный вид
- Месячный календарь с визуализацией задач
- Навигация между месяцами
- Отображение задач по дням
- Подсветка текущей даты

### Аналитика продуктивности
- `productivity_stats()`: расчет ключевых метрик продуктивности
- Уровень завершения задач
- Среднее количество задач в день
- Самая активная категория
- Самый продуктивный день
- Тренды выполнения задач

## Компоненты интерфейса

### user_menu()
Меню пользователя с переключением между режимами аутентификации:
- При неаутентифицированном пользователе: кнопка входа
- При аутентифицированном пользователе: выпадающее меню с профилем, настройками и выходом

### login_dialog()
Диалоговое окно входа в систему:
- Поля для ввода имени пользователя и пароля
- Предопределенные учетные записи для демонстрации
- Валидация учетных данных

### task_form()
Расширенная форма для добавления новой задачи:
- Название и описание задачи
- Приоритет и категория
- Срок выполнения
- Назначение исполнителя
- Кнопки добавления и очистки

### task_card(task)
Улучшенная карточка задачи с:
- Чекбоксом для выбора
- Бейджами статуса, приоритета и категории
- Информацией об исполнителе и сроках
- Индикаторами зависимостей и подзадач
- Улучшенными кнопками действий
- Анимациями и визуальными эффектами

### stats_panel()
Улучшенная панель статистики с двумя вкладками:

**Основная статистика:**
- Общее количество задач по статусам
- Количество задач по категориям
- Счетчики просроченных задач

**Аналитика:**
- Уровень завершения задач (%)
- Среднее количество задач в день
- Самая активная категория
- Самый продуктивный день
- Тренды выполнения задач

### filter_controls()
Многофункциональная панель фильтрации с тремя вкладками:

**Основные фильтры:**
- Поиск по задачам
- Фильтры по статусу, приоритету, категории, исполнителю
- Кнопка сброса фильтров

**Расширенные фильтры:**
- Фильтры по датам (создания, выполнения)
- Фильтры "сегодня"
- Расширенные настройки поиска
- Специальные фильтры (просроченные, завершенные)

**Сортировка:**
- Выбор поля сортировки
- Кнопка направления сортировки
- Экспортные функции

### calendar_view()
Календарный компонент с:
- Навигацией по месяцам
- Видом недели и дня
- Отображением задач по дням
- Визуальной индикацией статуса задач
- Подсветкой текущей даты

### dependency_manager(task)
Компонент управления зависимостями:
- Отображение текущих зависимостей
- Просмотр зависимых задач
- Добавление новых зависимостей
- Удаление существующих зависимостей

### sub_task_manager(task)
Компонент управления подзадачами:
- Прогресс-бар для родительских задач
- Список подзадач
- Добавление новых подзадач
- Отслеживание прогресса

## Уведомления и экспорты

### notification_banner()
- Уведомления о просроченных задачах
- Отображение количества просроченных задач
- Кнопка скрытия уведомлений

### bulk_actions_bar()
- Индикация количества выбранных задач
- Кнопка выбора всех отфильтрованных
- Массовые действия по статусу
- Массовое назначение исполнителей
- Массовое удаление
- Отмена выбора

## Форматы экспорта

**Система поддерживает экспорт в двух форматах:**

- **CSV**: Таблицы значений, разделенных запятыми
- **JSON**: Структурированные данные в формате `JSON`

**Доступен экспорт:**

- Все задачи
- Отфильтрованные задачи
- Автоматическая маркировка файлов временем

## Технологии

- **Reflex** (версия >=0.8.26) - основной фреймворк
- **Python** - основной язык программирования
- **Pydantic** - для валидации моделей данных
- **JSON** - для сериализации и экспорта
- **CSS Grid/Flexbox** - для responsive дизайна
- **Tailwind CSS** - через `TailwindV4Plugin`
- **React** - под капотом `Reflex` для `UI`
- **TypeScript** - типизация через `Pydantic` модели

## Система стилизации

- Custom theme colors (task-primary, task-secondary)
- Responsive grid layout
- Анимации при наведении
- Поддержка dark mode
- Единая цветовая палитра
- Google Fonts (Inter) для typography
- Adaptive design для различных устройств

## Персистентность данных

**Система использует `rx.LocalStorage` для хранения:**

- Полный список задач
- Идентификаторы и состояния
- При восстановлении перезагружается список команд

**Автоматическое сохранение:**

- После всех изменений состояния
- **Формат:** JSON-сериализация
- Обработка ошибок

## Расширение функционала

**Приложение может быть дополнительно расширено следующими возможностями:**

- **Аутентификация пользователей** - персональные аккаунты
- **Совместное использование задач** - командная работа
- **Интеграция с внешними сервисами** - календари, почта
- **Расширенная аналитика** - графики, отчеты
- **Мобильное приложение** - native мобильные версии
- **API для интеграций** - `REST/GraphQL` интерфейсы
- **Шаблоны задач** - повторяющиеся задачи
- **Таймеры и трекинг времени** - учет рабочего времени

## Рекомендации по использованию

1. **Регулярное использование фильтров** для эффективного поиска задач
2. **Использование зависимостей** для планирования сложных проектов
3. **Массовые операции** для управления множеством задач одновременно
4. **Календарный вид** для визуализации сроков выполнения
5. **Экспорт данных** для резервного копирования и анализа
6. **Подзадачи** для декомпозиции сложных задач

## Требования к системе

- `Python 3.8 или выше`
- `Reflex >=0.8.26`
- Современный веб-браузер
- 50MB свободного места для хранения данных
