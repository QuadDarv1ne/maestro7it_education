# Система управления библиотекой книг

## Описание проекта

Современная консольная система управления библиотекой книг с поддержкой множества функций для эффективного хранения, поиска и управления коллекцией книг.

## Особенности

- **Полный CRUD функционал** - создание, чтение, обновление и удаление книг
- **Многопольная сортировка** - сортировка по нескольким критериям одновременно
- **Многофункциональный поиск** - поиск по названию, автору, жанру и `ISBN`
- **Система отмены операций** - возможность отменить последние `k` операций удаления
- **Полное логирование действий** - запись всех действий пользователя в файл и память
- **Сохранение и загрузка данных** - работа с файлами для постоянного хранения
- **Интуитивный интерфейс** - удобное меню с графическими элементами

## Функции

### Основные операции

- Добавление новых книг
- Удаление книг
- Обновление информации о книгах
- Просмотр всей библиотеки

### Сортировка

- Сортировка по названию, автору, году издания или жанру
- **Многопольная сортировка**:
  - По автору и названию одновременно
  - По году издания и жанру одновременно

### Поиск

- Поиск по названию (частичное совпадение)
- Поиск по автору (частичное совпадение)
- Поиск по жанру
- Поиск по `ISBN`

### Специальные функции

- Найти книги по автору и/или жанру
- Найти самую старую книгу после указанного года
- Найти самый популярный жанр
- Статистика по годам издания
- Найти книги с экстремальной длиной названия
- Распределение по жанрам
- Показать недавно изданные книги

### Система отмены операций

- Отмена последних `k` операций удаления
- Настройка максимального количества операций для отмены
- Очистка истории отмены

### Система логирования

- Запись всех действий в лог-файл
- Хранение истории действий в памяти
- Настройка размера истории
- Просмотр истории действий

## Структура проекта

```textline
book_manager/
├── README.md                      # Документация проекта
├── book.h                         # Определение структуры книги и жанров
├── book.cpp                       # Реализация функций работы с жанрами
├── library.h                      # Определение класса библиотеки
├── library.cpp                    # Реализация функций библиотеки
├── ui.h                           # Определение интерфейса пользователя
├── ui.cpp                         # Реализация пользовательского интерфейса
├── main.cpp                       # Главная точка входа
├── book_manager_with_log.exe      # Основная исполняемая программа
├── demo_logging.exe               # Демонстрация системы логирования
├── demo_undo_sort.exe             # Демонстрация сортировки и отмены
├── test_actions.log               # Пример лог-файла
└── FULL_IMPLEMENTATION_SUMMARY.md # Техническая документация
```

## Требования

- `C++17` или выше
- Совместимый с `C++17` компилятор (`GCC`, `Clang`, `MSVC`)
- Свободное место на диске для хранения данных

## Компиляция

### Компиляция основной программы:

```bash
g++ -std=c++17 -Wall -Wextra -O2 library.cpp book.cpp ui.cpp main.cpp -o book_manager_with_log.exe
```

### Компиляция демонстрационных программ:

```bash
# Демонстрация логирования
g++ -std=c++17 -Wall -Wextra -O2 library.cpp book.cpp demo_logging.cpp -o demo_logging.exe

# Демонстрация сортировки и отмены
g++ -std=c++17 -Wall -Wextra -O2 library.cpp book.cpp demo_undo_sort.cpp -o demo_undo_sort.exe
```

## Использование

1. **Запустите основную программу:** `book_manager_with_log.exe`
2. Следуйте инструкциям в меню
3. Используйте цифры для выбора пунктов меню
4. Все данные сохраняются в текстовые файлы

### Основное меню:

- `1` - Просмотреть библиотеку
- `2` - Добавить книгу
- `3` - Удалить книгу
- `4` - Изменить информацию о книге
- `5` - Сортировка
- `6` - Поиск книг
- `7` - Работа с файлами
- `8` - Специальные функции
- `9` - Отмена операций
- `10` - История действий
- `0` - Выход

## Типы жанров

**Поддерживаются следующие жанры:**

- Роман
- Повесть
- Роман-эпопея
- Роман в стихах
- Фантастика
- Детектив
- Драма
- Комедия
- Поэзия
- Проза
- Другое

## Формат файла данных

**Файл данных использует следующий формат:**

```
[количество_книг]
[название_книги]
[автор_книги]
[год_издания]
[жанр_книги]
[ISBN_книги]
[описание_книги]
...
```

## Система логирования

Все действия пользователя автоматически записываются в лог-файл с временной меткой. 

**Пример записи:**
```
[Thu Jan 22 17:16:57 2026] Добавлена книга: "Война и мир" (Автор: Лев Толстой, Год: 1869)
```

## Система отмены

Система отмены позволяет восстановить до 10 последних удаленных книг (по умолчанию, настраивается). Книги восстанавливаются на свои исходные позиции.

## Многопольная сортировка

**Программа поддерживает сложную сортировку:**

- Сортировка сначала по первому критерию, затем по второму
- **Например:** сначала по автору, затем по названию
- Или: сначала по году издания, затем по жанру

## Авторы

Разработано как учебный проект по курсу `"Программирование на C++"`

**Преподаватель:** Дуплей Максим Игоревич
