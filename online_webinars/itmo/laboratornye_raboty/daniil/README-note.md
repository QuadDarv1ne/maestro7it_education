# Лабораторная работа №2

## Анализ программы варианта 245675

### 1. Текст программы

> **Примечание:** Адреса и команды представлены в шестнадцатеричной системе счисления.

| Адрес | Код команды | Мнемоника | Комментарии |
|:-----:|:----------:|:----------:|-----------|
| `107` | `6108` | `SUB [108]` | Вычесть содержимое ячейки 108 из AC |
| `108` | `E11C` | `ST [11C]` | Сохранить AC в ячейку 11C |
| `109` | `611D` | `SUB [11D]` | Вычесть содержимое ячейки 11D из AC |
| `10A` | `0200` | *(данные)* | Значение `0200` (используется как данные) |
| `10B` | `611B` | `SUB [11B]` | Вычесть содержимое ячейки 11B из AC |
| `10C` | `6108` | `SUB [108]` | Вычесть содержимое ячейки 108 из AC |
| `10D` | `E11C` | `ST [11C]` | Сохранить AC в ячейку 11C |
| `10E` | `A109` | `LD [109]` | Загрузить в AC содержимое ячейки 109 |
| `10F` | `211C` | `AND [11C]` | Логическое И с содержимым ячейки 11C |
| `110` | `E11C` | `ST [11C]` | Сохранить AC в ячейку 11C |
| `111` | `0280` | `NOT` | Побитовая инверсия AC |
| `112` | `211E` | `AND [11E]` | Логическое И с содержимым ячейки 11E |
| `113` | `311C` | `OR [11C]` | Логическое ИЛИ с содержимым ячейки 11C |
| `114` | `E107` | `ST [107]` | Сохранить AC в ячейку 107 |
| `115` | `0200` | `CLA` | Очистить аккумулятор (AC = 0) |
| `116` | `0280` | `NOT` | Побитовая инверсия AC (AC = 0xFFFF) |
| `117` | `211E` | `AND [11E]` | Логическое И с содержимым ячейки 11E |
| `118` | `311C` | `OR [11C]` | Логическое ИЛИ с содержимым ячейки 11C |
| `119` | `E107` | `ST [107]` | Сохранить AC в ячейку 107 |
| `11A` | `0100` | `HLT` | Останов |
| `11B` | `611C` | `SUB [11C]` | *(команда, но не выполняется напрямую)* |
| `11C` | `211C` | `AND [11C]` | *(команда, используется как данные)* |
| `11D` | `6108` | `SUB [108]` | *(команда, используется как данные)* |
| `11E` | `A109` | `LD [109]` | *(команда, используется как данные)* |### 2. Описание программы

**Назначение программы:** Программа выполняет последовательность арифметических и логических операций над содержимым ячеек памяти, модифицирует саму себя (записывает результат в ячейку 107) и завершается.

#### Функция, вычисляемая программой:

$$\text{Результат} = [11E] \vee ([109] \wedge (-[11D] - [11B]))$$

где $[x]$ — содержимое ячейки $x$, операции интерпретируются как арифметические (для `SUB`) и логические (для `AND`, `OR`, `NOT`) в соответствии с типами команд.

#### Исходные данные:

- **Ячейки памяти, используемые как операнды:** `108`, `109`, `11B`, `11C`, `11D`, `11E` (содержимое — коды команд)
- **Ячейка `10A`:** содержит данные `0200`

#### Область представления и допустимых значений:

| Тип операции | Представление | Диапазон |
|:---|:---|:---|
| **Арифметические** (SUB) | 16-разрядные знаковые (доп. код) | $[-32768, 32767]$ |
| **Логические** (AND, OR, NOT) | 16-разрядные битовые наборы | `0x0000` – `0xFFFF` |

#### Расположение в памяти:

- **Программа:** ячейки `107`–`11E`
- **Исходные данные:** ячейка `10A`
- **Результат:** ячейка `107` (самомодификация)

#### Адреса первой и последней команды:

- **Первая:** адрес `107`
- **Последняя:** адрес `11A` (`HLT`)
### 3. Таблица трассировки

> **Предусловие:** AC = 0, PS = 0, SP = 0, другие регистры нулевые. Память инициализирована согласно листингу.
>
> **Примечание:** Значения AC, DR и др. в шестнадцатеричной форме; флаги NZVC: **N** — знак, **Z** — ноль, **V** — переполнение, **C** — перенос.

| Адрес | Код | IP | CR | AR | DR | BR | SP | PS | AC | NZVC | Примечания |
|:-----:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|-----------|
| `107` | `6108` | `108` | `6108` | `108` | `E11C` | `-` | 0 | 0 | `E11C` | `N---` | `SUB [108]`: AC = 0 − E11C = E11C (−23908) |
| `108` | `E11C` | `109` | `E11C` | `11C` | `E11C` | `-` | 0 | 0 | `E11C` | `N---` | `ST [11C]`: запись AC в 11C |
| `109` | `611D` | `10B` | `611D` | `11D` | `6108` | `-` | 0 | 0 | `8D04` | `N---` | `SUB [11D]`: AC = E11C − 6108 = 8D04 |
| `10B` | `611B` | `10C` | `611B` | `11B` | `611C` | `-` | 0 | 0 | `2BE8` | `N---` | `SUB [11B]`: AC = 8D04 − 611C = 2BE8 |
| `10C` | `6108` | `10D` | `6108` | `108` | `E11C` | `-` | 0 | 0 | `4A0C` | `N---` | `SUB [108]`: AC = 2BE8 − E11C = 4A0C |
| `10D` | `E11C` | `10E` | `E11C` | `11C` | `4A0C` | `-` | 0 | 0 | `4A0C` | `N---` | `ST [11C]`: перезапись AC в 11C |
| `10E` | `A109` | `10F` | `A109` | `109` | `611D` | `-` | 0 | 0 | `611D` | `-V--` | `LD [109]`: AC = 611D |
| `10F` | `211C` | `110` | `211C` | `11C` | `4A0C` | `-` | 0 | 0 | `400C` | `N---` | `AND [11C]`: AC = 611D & 4A0C = 400C |
| `110` | `E11C` | `111` | `E11C` | `11C` | `400C` | `-` | 0 | 0 | `400C` | `N---` | `ST [11C]`: запись AC в 11C |
| `111` | `0280` | `112` | `0280` | `-` | `-` | `-` | 0 | 0 | `BFF3` | `N---` | `NOT`: AC = ~400C = BFF3 |
| `112` | `211E` | `113` | `211E` | `11E` | `A109` | `-` | 0 | 0 | `A101` | `N---` | `AND [11E]`: AC = BFF3 & A109 = A101 |
| `113` | `311C` | `114` | `311C` | `11C` | `400C` | `-` | 0 | 0 | `E10D` | `N---` | `OR [11C]`: AC = A101 \| 400C = E10D |
| `114` | `E107` | `115` | `E107` | `107` | `6108` | `-` | 0 | 0 | `E10D` | `N---` | `ST [107]`: запись AC в 107 |
| `115` | `0200` | `116` | `0200` | `-` | `-` | `-` | 0 | 0 | `0000` | `-Z--` | `CLA`: AC = 0 |
| `116` | `0280` | `117` | `0280` | `-` | `-` | `-` | 0 | 0 | `FFFF` | `N---` | `NOT`: AC = ~0 = FFFF |
| `117` | `211E` | `118` | `211E` | `11E` | `A109` | `-` | 0 | 0 | `A109` | `N---` | `AND [11E]`: AC = FFFF & A109 = A109 |
| `118` | `311C` | `119` | `311C` | `11C` | `400C` | `-` | 0 | 0 | `E10D` | `N---` | `OR [11C]`: AC = A109 \| 400C = E10D |
| `119` | `E107` | `11A` | `E107` | `107` | `E10D` | `-` | 0 | 0 | `E10D` | `N---` | `ST [107]`: перезапись AC в 107 |
| `11A` | `0100` | `11B` | `0100` | `-` | `-` | `-` | 0 | 0 | `E10D` | `N---` | `HLT`: останов |
### 4. Вариант программы с меньшим числом команд

Упрощение основано на том, что команды `111`–`114` вычисляют промежуточное значение, которое затем перезаписывается командами `115`–`119`. Поэтому их можно удалить без изменения окончательного результата. Ячейка `10A` содержит неиспользуемые данные и также удаляется.

#### Упрощенная программа (15 команд вместо 19):

| Адрес | Код команды | Мнемоника | Комментарии |
|:-----:|:----------:|:----------:|-----------|
| `107` | `6108` | `SUB [108]` | Вычесть [108] из AC |
| `108` | `E11C` | `ST [11C]` | Сохранить AC в 11C |
| `109` | `611D` | `SUB [11D]` | Вычесть [11D] из AC |
| `10B` | `611B` | `SUB [11B]` | Вычесть [11B] из AC |
| `10C` | `6108` | `SUB [108]` | Вычесть [108] из AC |
| `10D` | `E11C` | `ST [11C]` | Сохранить AC в 11C |
| `10E` | `A109` | `LD [109]` | Загрузить [109] в AC |
| `10F` | `211C` | `AND [11C]` | AND с [11C] |
| `110` | `E11C` | `ST [11C]` | Сохранить AC в 11C |
| `115` | `0200` | `CLA` | Очистить AC (AC = 0) |
| `116` | `0280` | `NOT` | NOT AC (AC = 0xFFFF) |
| `117` | `211E` | `AND [11E]` | AND с [11E] |
| `118` | `311C` | `OR [11C]` | OR с [11C] |
| `119` | `E107` | `ST [107]` | Сохранить AC в 107 |
| `11A` | `0100` | `HLT` | Останов |

> **Примечание:** Адреса остаются прежними; удалённые команды пропущены в нумерации.
### 5. Контрольные вопросы (кратко)

#### Форматы представления данных в БЭВМ

| Тип данных | Разрядность | Представление | Диапазон |
|:---|:---:|:---|:---|
| **Знаковые числа** | 16 | Дополнительный код | $[-32768, 32767]$ |
| **Беззнаковые числа** | 16 | Прямое представление | $[0, 65535]$ |
| **Логические значения** | 16 | Битовые наборы | `0x0000` – `0xFFFF` |

#### Представление чисел в различных кодах

| Код | Описание | Применение |
|:---|:---|:---|
| **Прямой** | Знак (+/−) + абсолютное значение | Исторический формат |
| **Обратный** | Инверсия битов (для отриц. чисел) | Переходный формат |
| **Дополнительный** | Обратный код + 1 | **Используется в БЭВМ** |

#### Типы адресации команд

**Адресные команды:**
- Содержат адрес операнда
- Примеры: `LD` (загрузка), `ST` (сохранение)

**Безадресные команды:**
- Операнд неявный
- Примеры: `CLA` (очистка), `NOT` (инверсия)

#### Описание команды (пример: адрес 107: 6108)

| Параметр | Значение |
|:---|:---|
| **Наименование** | `SUB` |
| **Назначение** | Вычитание ячейки памяти из аккумулятора |
| **Тип** | Адресная, абсолютная адресация |
| **Машинные циклы** | Выборка команды → Выборка операнда → Исполнение |

#### Упрощение формулы

**Исходная формула:**
$$\text{Результат} = [11E] \vee ([109] \wedge (-[11D] - [11B]))$$

**Упрощение:** Команды `111`–`114` удалены как избыточные, так как их результат перезаписывается командами `115`–`119`.

#### Аргументы, результат и вспомогательные ячейки

| Элемент | Ячейки | Назначение |
|:---|:---|:---|
| **Аргументы** | `108`, `109`, `11B`, `11D`, `11E` | Используются как операнды |
| **Результат** | `107` | Итоговое значение (самомодификация) |
| **Вспомогательные** | `11C` | Промежуточное хранилище |

#### Обращение к памяти для безадресных команд

Безадресная команда выполняется за **один машинный цикл** (исполнение). **Обращений к памяти для выборки операнда нет.**

#### Адресные команды (кодирование по старшим разрядам)

| Код | Мнемоника | Назначение |
|:---|:---|:---|
| `2xxx` | `AND` | Логическое И |
| `3xxx` | `OR` | Логическое ИЛИ |
| `4xxx` | `ADD` | Сложение |
| `5xxx` | `ADC` | Сложение с переносом |
| `6xxx` | `SUB` | Вычитание |
| `7xxx` | `CMP` | Сравнение |
| `8xxx` | `LOOP` | Цикл |
| `9xxx` | — | *резерв* |
| `Axxx` | `LD` | Загрузка |
| `Bxxx` | `SWAM` | Обмен |
| `Cxxx` | `JUMP` | Безусловный переход |
| `Dxxx` | `CALL` | Вызов подпрограммы |
| `Exxx` | `ST` | Сохранение |

