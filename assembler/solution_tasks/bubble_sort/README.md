# Оптимизация алгоритма сортировки (Продвинутый уровень)

**Цель:** Реализовать пузырьковую сортировку на ассемблере и оптимизировать её через SSE/AVX и развернутые циклы.

---

**1.** Базовый алгоритм пузырьковой сортировки

   **Файл:** `bubble_basic.asm`

**2.** Оптимизация через SSE

   **Файл:** `bubble_sse.asm`

**3.** Развернутые циклы

   **Файл:** `bubble_unrolled.asm`

**4.** Тестирование скорости**

   **Файл:** `benchmark.asm`

## Инструкции по запуску

### Для DOS (16-бит)

1. Установите `DOSBox` и `NASM`

2. Скомпилируйте код:

   ```bash
   nasm bubble_basic.asm -f bin -o bubble.com
   ```

3. Запустите в `DOSBox`:

   ```bash
   mount c: /путь/к/файлам
   c:
   bubble.com
   ```

### Для Linux (32-бит)

1. Установите `NASM` и `GCC`:

   ```bash
   sudo apt install nasm gcc
   ```

2. Скомпилируйте и запустите:

   ```bash
   nasm -f elf32 bubble_basic.asm -o bubble.o
   ld -m elf_i386 bubble.o -o bubble
   ./bubble
   ```

### Тестирование скорости (`Linux`)

```bash
nasm -f elf32 benchmark.asm -o benchmark.o
ld -m elf_i386 benchmark.o -o benchmark
./benchmark
# Результат будет в EDX:EAX (используйте отладчик или добавьте вывод).
```

### Пример вывода

```textline
Время сортировки: 245000 тактов.
```

### Советы

1. **Используйте суффиксы в названиях:**

    - `_basic` — базовая версия.

    - `_sse` — с векторными инструкциями.

    - `_unrolled` — с развернутыми циклами.

    - `_optimized` — комбинированная оптимизация.

2. Для работы с `SSE/AVX` убедитесь, что процессор поддерживает эти инструкции.

3. **Компиляция:**

    - Для `SSE`: `nasm -f elf32 -o bubble_sse.o bubble_sse.asm`

    - Для `AVX`: добавьте `-dUSE_AVX` в `NASM` и используйте ymm-регистры.

4. **Используйте `gdb` для отладки в `Linux`:**

   ```bash
   gdb ./bubble
   break _start
   run
   ```

5. Тестируйте на больших массивах (1000+ элементов) для оценки прироста скорости.

6. **Сравните результаты:**

   ```bash
   # Пример для Linux:
   time ./bubble_basic
   time ./bubble_optimized
   ```

---

**Преподаватель:** Дуплей Максим Игоревич

**Дата:** 14.04.2025
