; ===============================================================
; Тестирование скорости работы алгоритмов сортировки (x86)      ;
; Цель: Замер тактов процессора для оценки оптимизаций.         ;
; Вход: Нет (тестовый массив генерируется внутри).              ;
; Выход: Количество тактов на выполнение (в EDX:EAX).           ;
; Особенности:                                                  ;
;   - Использование инструкции RDTSC.                           ;
;   - Поддержка только на процессорах x86.                      ;
; Пример вызова: Запустить и получить результат через отладчик. ;
; ===============================================================

section .text
global _start

_start:
    mov ecx, len-1          ; Количество проходов
.outer_loop:
    mov edi, 0              ; Флаг обмена
    mov esi, 0              ; Индекс
.inner_loop:
    mov al, [array + esi]
    cmp al, [array + esi + 1]
    jbe .no_swap
    xchg al, [array + esi + 1]
    mov [array + esi], al
    mov edi, 1              ; Установить флаг обмена
.no_swap:
    inc esi
    cmp esi, ecx
    jb .inner_loop
    test edi, edi
    jz .exit
    loop .outer_loop
.exit:
    ; Завершение программы
    mov eax, 1
    int 0x80
