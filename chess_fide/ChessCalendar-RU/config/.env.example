# ============================================
# Chess Calendar RU - Environment Variables
# ============================================

# ----------------
# Flask Configuration
# ----------------
SECRET_KEY=change-me-in-production-use-random-string
FLASK_ENV=development
FLASK_DEBUG=True

# ----------------
# Database Configuration
# ----------------
# Development (SQLite)
DATABASE_URL=sqlite:///chess_calendar.db

# Production (PostgreSQL) - раскомментируйте для production
# DATABASE_URL=postgresql://chess_user:password@postgres:5432/chess_calendar

# PostgreSQL настройки (для docker-compose.prod.yml)
POSTGRES_DB=chess_calendar
POSTGRES_USER=chess_user
POSTGRES_PASSWORD=change-me-in-production

# ----------------
# Redis Configuration
# ----------------
REDIS_URL=redis://localhost:6379/0

# ----------------
# Celery Configuration
# ----------------
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# ----------------
# JWT Authentication
# ----------------
JWT_SECRET_KEY=change-me-in-production
JWT_EXPIRATION_HOURS=24
JWT_REFRESH_EXPIRATION_DAYS=30

# ----------------
# Microservices URLs
# ----------------
# Для локальной разработки
TOURNAMENT_SERVICE_URL=http://localhost:5001
USER_SERVICE_URL=http://localhost:5002
PARSER_SERVICE_URL=http://localhost:5003
CDN_SERVICE_URL=http://localhost:5004
IMAGE_SERVICE_URL=http://localhost:5005
CALENDAR_SERVICE_URL=http://localhost:5006
NOTIFICATION_SERVICE_URL=http://localhost:5007
RECOMMENDATION_SERVICE_URL=http://localhost:5008
FAVORITES_SERVICE_URL=http://localhost:5009

# Для Docker
# TOURNAMENT_SERVICE_URL=http://tournament-service:5001
# USER_SERVICE_URL=http://user-service:5002
# и т.д.

# ----------------
# External APIs
# ----------------
FIDE_CALENDAR_URL=https://calendar.fide.com/calendar.php
CFR_URL=https://ruchess.ru/

# ----------------
# Logging Configuration
# ----------------
LOG_LEVEL=INFO
LOG_FILE=logs/chess_calendar.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=10
JSON_LOGS=True

# ----------------
# Security Settings
# ----------------
SESSION_COOKIE_SECURE=False  # True для production с HTTPS
SESSION_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=Lax
WTF_CSRF_ENABLED=True
WTF_CSRF_TIME_LIMIT=3600

# ----------------
# Rate Limiting
# ----------------
RATELIMIT_STORAGE_URL=redis://localhost:6379/1
RATELIMIT_DEFAULT=200 per day, 50 per hour
RATELIMIT_ENABLED=True

# ----------------
# Cache Configuration
# ----------------
CACHE_TYPE=redis
CACHE_REDIS_URL=redis://localhost:6379/2
CACHE_DEFAULT_TIMEOUT=300
CACHE_KEY_PREFIX=chess_calendar:

# Многоуровневое кэширование
L1_CACHE_MAX_SIZE=1000
L2_CACHE_ENABLED=True
CDN_CACHE_ENABLED=False

# ----------------
# Email Configuration (опционально)
# ----------------
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=True
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_DEFAULT_SENDER=noreply@chesscalendar.ru

# ----------------
# Monitoring & Observability
# ----------------
# Sentry
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# OpenTelemetry
OTEL_ENABLED=False
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_SERVICE_NAME=chess-calendar-api

# Prometheus
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus_multiproc

# ----------------
# Flower (Celery Monitoring)
# ----------------
FLOWER_USER=admin
FLOWER_PASSWORD=change-me-in-production
FLOWER_PORT=5555

# ----------------
# CDN Configuration
# ----------------
CDN_PROVIDER=cloudflare
CDN_ENABLED=False
CDN_URL=https://cdn.chesscalendar.ru
CLOUDFLARE_API_TOKEN=
CLOUDFLARE_ZONE_ID=

# ----------------
# File Upload
# ----------------
MAX_CONTENT_LENGTH=16777216  # 16MB
UPLOAD_FOLDER=uploads
ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,pdf

# ----------------
# Pagination
# ----------------
ITEMS_PER_PAGE=20
MAX_ITEMS_PER_PAGE=100

# ----------------
# Parser Configuration
# ----------------
PARSER_TIMEOUT=30
PARSER_MAX_RETRIES=3
PARSER_USER_AGENT=ChessCalendarBot/2.0

# ----------------
# Feature Flags
# ----------------
FEATURE_RECOMMENDATIONS=True
FEATURE_NOTIFICATIONS=True
FEATURE_FORUM=True
FEATURE_ANALYTICS=True
FEATURE_PWA=True

# ----------------
# Development Tools
# ----------------
# Flask Debug Toolbar
DEBUG_TB_ENABLED=False
DEBUG_TB_INTERCEPT_REDIRECTS=False

# SQL Echo (логирование SQL запросов)
SQLALCHEMY_ECHO=False

# ----------------
# Testing
# ----------------
TESTING=False
TEST_DATABASE_URL=sqlite:///test_chess_calendar.db

# ----------------
# Backup Configuration
# ----------------
BACKUP_DIR=backups
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 4 * * *  # Каждый день в 4:00

# ----------------
# Performance
# ----------------
# Database connection pooling
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Worker configuration
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000

# ----------------
# Localization
# ----------------
DEFAULT_LANGUAGE=ru
SUPPORTED_LANGUAGES=ru,en
TIMEZONE=Europe/Moscow

# ----------------
# Admin Configuration
# ----------------
ADMIN_EMAIL=admin@chesscalendar.ru
ADMIN_USERNAME=admin
# Установите через manage.py create-admin

# ----------------
# API Configuration
# ----------------
API_VERSION=v1
API_TITLE=Chess Calendar RU API
API_DESCRIPTION=API для шахматного календаря России
API_DOCS_URL=/api/docs

# ----------------
# CORS Configuration
# ----------------
CORS_ENABLED=True
CORS_ORIGINS=http://localhost:3000,http://localhost:5000
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=Content-Type,Authorization

# ----------------
# WebSocket (для будущего использования)
# ----------------
WEBSOCKET_ENABLED=False
WEBSOCKET_PORT=8000

# ----------------
# Maintenance Mode
# ----------------
MAINTENANCE_MODE=False
MAINTENANCE_MESSAGE=Сайт находится на техническом обслуживании

# ============================================
# ВАЖНО: Для production обязательно измените:
# - SECRET_KEY
# - JWT_SECRET_KEY
# - POSTGRES_PASSWORD
# - FLOWER_PASSWORD
# - SESSION_COOKIE_SECURE=True
# - FLASK_DEBUG=False
# - SENTRY_DSN
# ============================================
