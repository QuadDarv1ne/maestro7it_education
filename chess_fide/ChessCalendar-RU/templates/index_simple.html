{% extends "base_inline.html" %}

{% block title %}–®–∞—Ö–º–∞—Ç–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å - ChessCalendar-RU{% endblock %}

{% block content %}
    <!-- Hero Section -->
    <div class="hero-section">
        <h1>ChessCalendar-RU</h1>
        <p style="font-size: 1.2rem;">–ö–∞–ª–µ–Ω–¥–∞—Ä—å —à–∞—Ö–º–∞—Ç–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤ –†–æ—Å—Å–∏–∏ –∏ –º–∏—Ä–∞</p>
        <p>–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–º–∏ —Ç—É—Ä–Ω–∏—Ä–∞–º–∏, –Ω–∞—Ö–æ–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–µ –≤–∞—Å —Å–æ–±—ã—Ç–∏—è –∏ –±—É–¥—å—Ç–µ –≤ –∫—É—Ä—Å–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π —à–∞—Ö–º–∞—Ç–Ω–æ–≥–æ –º–∏—Ä–∞</p>
    </div>

    <!-- Stats Overview -->
    <div class="row mb-4">
        <div class="col-md-3 col-12 mb-3">
            <div class="card text-center">
                <h3 class="text-primary">{{ tournaments.total }}</h3>
                <p class="text-muted mb-0">–í—Å–µ–≥–æ —Ç—É—Ä–Ω–∏—Ä–æ–≤</p>
            </div>
        </div>
        <div class="col-md-3 col-12 mb-3">
            <div class="card text-center">
                <h3 class="text-success">{{ tournaments.items|selectattr('status', 'equalto', 'Ongoing')|list|length }}</h3>
                <p class="text-muted mb-0">–ê–∫—Ç–∏–≤–Ω—ã—Ö</p>
            </div>
        </div>
        <div class="col-md-3 col-12 mb-3">
            <div class="card text-center">
                <h3 class="text-warning">{{ tournaments.items|selectattr('status', 'equalto', 'Scheduled')|list|length }}</h3>
                <p class="text-muted mb-0">–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö</p>
            </div>
        </div>
        <div class="col-md-3 col-12 mb-3">
            <div class="card text-center">
                <h3 class="text-info">{{ tournaments.items|selectattr('category', 'equalto', 'International')|list|length }}</h3>
                <p class="text-muted mb-0">–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö</p>
            </div>
        </div>
    </div>

    <!-- Tournament List -->
    <h2 class="mb-4">–¢—É—Ä–Ω–∏—Ä—ã</h2>
    
    {% if tournaments.items %}
        <div class="row">
            {% for tournament in tournaments.items %}
            <div class="col-md-4 col-12 mb-3">
                <div class="card">
                    <div class="mb-3">
                        <span class="badge bg-primary">{{ tournament.category }}</span>
                        <span class="badge bg-success">{{ tournament.status }}</span>
                    </div>
                    
                    <h5 class="card-title">{{ tournament.name }}</h5>
                    
                    <p class="mb-2">
                        üìÖ <strong>{{ tournament.start_date.strftime('%d.%m.%Y') }}</strong> - 
                        <strong>{{ tournament.end_date.strftime('%d.%m.%Y') }}</strong>
                    </p>
                    
                    <p class="mb-2">
                        üìç {{ tournament.location }}
                    </p>
                    
                    {% if tournament.description %}
                    <p class="text-muted" style="font-size: 0.9rem;">
                        {{ tournament.description[:100] }}{% if tournament.description|length > 100 %}...{% endif %}
                    </p>
                    {% endif %}
                    
                    {% if tournament.prize_fund %}
                    <p class="mb-2">
                        üí∞ <strong>–ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥:</strong> 
                        <span class="text-success">{{ tournament.prize_fund }}</span>
                    </p>
                    {% endif %}
                    
                    <a href="/tournament/{{ tournament.id }}" class="btn btn-primary">
                        –ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <!-- Pagination -->
        {% if tournaments.pages > 1 %}
        <div class="mt-4" style="text-align: center;">
            <p>–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ tournaments.page }} –∏–∑ {{ tournaments.pages }}</p>
            <div>
                {% if tournaments.has_prev %}
                <a href="?page={{ tournaments.prev_num }}" class="btn btn-primary">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
                {% endif %}
                
                {% if tournaments.has_next %}
                <a href="?page={{ tournaments.next_num }}" class="btn btn-primary">–°–ª–µ–¥—É—é—â–∞—è ‚Üí</a>
                {% endif %}
            </div>
        </div>
        {% endif %}
    {% else %}
        <div class="alert alert-warning">
            <strong>–¢—É—Ä–Ω–∏—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</strong>
            <p>–í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤.</p>
        </div>
    {% endif %}
{% endblock %}
