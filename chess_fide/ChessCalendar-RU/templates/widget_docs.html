{% extends "base.html" %}

{% block title %}Виджет для сайта - ChessCalendar-RU{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="mb-4">
        <i class="bi bi-code-square"></i> Виджет для вашего сайта
    </h1>
    
    <div class="row">
        <div class="col-lg-8">
            <!-- Introduction -->
            <div class="card mb-4">
                <div class="card-body">
                    <h3>Встройте календарь турниров на свой сайт</h3>
                    <p class="lead">
                        Добавьте актуальную информацию о шахматных турнирах на ваш сайт 
                        с помощью нашего простого виджета.
                    </p>
                </div>
            </div>
            
            <!-- Quick Start -->
            <div class="card mb-4">
                <div class="card-header">
                    <h4 class="mb-0">Быстрый старт</h4>
                </div>
                <div class="card-body">
                    <p>Скопируйте этот код и вставьте на свой сайт:</p>
                    
                    <pre class="bg-dark text-light p-3 rounded"><code>&lt;div id="chess-calendar-widget"&gt;&lt;/div&gt;
&lt;script src="https://chesscalendar.ru/static/js/widget.js"&gt;&lt;/script&gt;</code></pre>
                    
                    <button class="btn btn-primary" onclick="copyCode('basic')">
                        <i class="bi bi-clipboard"></i> Копировать код
                    </button>
                </div>
            </div>
            
            <!-- Configuration -->
            <div class="card mb-4">
                <div class="card-header">
                    <h4 class="mb-0">Настройка виджета</h4>
                </div>
                <div class="card-body">
                    <p>Используйте data-атрибуты для настройки виджета:</p>
                    
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Атрибут</th>
                                <th>Описание</th>
                                <th>По умолчанию</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>data-category</code></td>
                                <td>Фильтр по категории (blitz, rapid, classical)</td>
                                <td>все</td>
                            </tr>
                            <tr>
                                <td><code>data-location</code></td>
                                <td>Фильтр по локации (Москва, Санкт-Петербург)</td>
                                <td>все</td>
                            </tr>
                            <tr>
                                <td><code>data-limit</code></td>
                                <td>Количество турниров (1-20)</td>
                                <td>5</td>
                            </tr>
                            <tr>
                                <td><code>data-theme</code></td>
                                <td>Тема оформления (light, dark)</td>
                                <td>light</td>
                            </tr>
                            <tr>
                                <td><code>data-show-rating</code></td>
                                <td>Показывать рейтинг (true, false)</td>
                                <td>true</td>
                            </tr>
                            <tr>
                                <td><code>data-compact</code></td>
                                <td>Компактный режим (true, false)</td>
                                <td>false</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Examples -->
            <div class="card mb-4">
                <div class="card-header">
                    <h4 class="mb-0">Примеры использования</h4>
                </div>
                <div class="card-body">
                    <!-- Example 1 -->
                    <h5>Только блиц турниры</h5>
                    <pre class="bg-dark text-light p-3 rounded"><code>&lt;div id="chess-calendar-widget" 
     data-category="blitz" 
     data-limit="3"&gt;&lt;/div&gt;
&lt;script src="https://chesscalendar.ru/static/js/widget.js"&gt;&lt;/script&gt;</code></pre>
                    
                    <button class="btn btn-sm btn-outline-primary mb-3" onclick="copyCode('blitz')">
                        <i class="bi bi-clipboard"></i> Копировать
                    </button>
                    
                    <!-- Example 2 -->
                    <h5 class="mt-4">Турниры в Москве (темная тема)</h5>
                    <pre class="bg-dark text-light p-3 rounded"><code>&lt;div id="chess-calendar-widget" 
     data-location="Москва" 
     data-theme="dark"
     data-limit="5"&gt;&lt;/div&gt;
&lt;script src="https://chesscalendar.ru/static/js/widget.js"&gt;&lt;/script&gt;</code></pre>
                    
                    <button class="btn btn-sm btn-outline-primary mb-3" onclick="copyCode('moscow')">
                        <i class="bi bi-clipboard"></i> Копировать
                    </button>
                    
                    <!-- Example 3 -->
                    <h5 class="mt-4">Компактный виджет</h5>
                    <pre class="bg-dark text-light p-3 rounded"><code>&lt;div id="chess-calendar-widget" 
     data-compact="true"
     data-limit="10"&gt;&lt;/div&gt;
&lt;script src="https://chesscalendar.ru/static/js/widget.js"&gt;&lt;/script&gt;</code></pre>
                    
                    <button class="btn btn-sm btn-outline-primary" onclick="copyCode('compact')">
                        <i class="bi bi-clipboard"></i> Копировать
                    </button>
                </div>
            </div>
            
            <!-- Features -->
            <div class="card mb-4">
                <div class="card-header">
                    <h4 class="mb-0">Возможности</h4>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <i class="bi bi-check-circle-fill text-success"></i> 
                            Автоматическое обновление данных
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle-fill text-success"></i> 
                            Адаптивный дизайн для мобильных устройств
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle-fill text-success"></i> 
                            Светлая и темная темы
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle-fill text-success"></i> 
                            Фильтрация по категориям и локациям
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle-fill text-success"></i> 
                            Отображение рейтингов турниров
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle-fill text-success"></i> 
                            Прямые ссылки на страницы турниров
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle-fill text-success"></i> 
                            Бесплатное использование
                        </li>
                    </ul>
                </div>
            </div>
            
            <!-- Support -->
            <div class="card mb-4">
                <div class="card-header">
                    <h4 class="mb-0">Поддержка</h4>
                </div>
                <div class="card-body">
                    <p>Нужна помощь с интеграцией виджета?</p>
                    <ul>
                        <li>Email: <a href="mailto:support@chesscalendar.ru">support@chesscalendar.ru</a></li>
                        <li>Telegram: <a href="https://t.me/chesscalendar_support">@chesscalendar_support</a></li>
                        <li>Документация API: <a href="/api/docs">/api/docs</a></li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Live Preview -->
        <div class="col-lg-4">
            <div class="position-sticky" style="top: 80px;">
                <div class="card">
                    <div class="card-header">
                        <h4 class="mb-0">Предварительный просмотр</h4>
                    </div>
                    <div class="card-body">
                        <div id="chess-calendar-widget" 
                             data-limit="3"
                             data-show-rating="true"></div>
                    </div>
                </div>
                
                <div class="card mt-3">
                    <div class="card-body">
                        <h5>Настройте виджет</h5>
                        
                        <div class="mb-3">
                            <label class="form-label">Категория</label>
                            <select class="form-select" id="previewCategory">
                                <option value="">Все</option>
                                <option value="blitz">Блиц</option>
                                <option value="rapid">Рапид</option>
                                <option value="classical">Классика</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Количество</label>
                            <input type="number" class="form-control" id="previewLimit" 
                                   value="3" min="1" max="10">
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Тема</label>
                            <select class="form-select" id="previewTheme">
                                <option value="light">Светлая</option>
                                <option value="dark">Темная</option>
                            </select>
                        </div>
                        
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="previewCompact">
                            <label class="form-check-label" for="previewCompact">
                                Компактный режим
                            </label>
                        </div>
                        
                        <button class="btn btn-primary w-100" onclick="updatePreview()">
                            <i class="bi bi-arrow-clockwise"></i> Обновить
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/widget.js') }}"></script>

<script>
    const codeExamples = {
        basic: `<div id="chess-calendar-widget"></div>
<script src="https://chesscalendar.ru/static/js/widget.js"><\/script>`,
        
        blitz: `<div id="chess-calendar-widget" 
     data-category="blitz" 
     data-limit="3"></div>
<script src="https://chesscalendar.ru/static/js/widget.js"><\/script>`,
        
        moscow: `<div id="chess-calendar-widget" 
     data-location="Москва" 
     data-theme="dark"
     data-limit="5"></div>
<script src="https://chesscalendar.ru/static/js/widget.js"><\/script>`,
        
        compact: `<div id="chess-calendar-widget" 
     data-compact="true"
     data-limit="10"></div>
<script src="https://chesscalendar.ru/static/js/widget.js"><\/script>`
    };
    
    function copyCode(example) {
        const code = codeExamples[example];
        
        if (navigator.clipboard) {
            navigator.clipboard.writeText(code).then(() => {
                window.ChessCalendar.showToast('Код скопирован!', 'success');
            });
        }
    }
    
    function updatePreview() {
        const container = document.getElementById('chess-calendar-widget');
        const category = document.getElementById('previewCategory').value;
        const limit = document.getElementById('previewLimit').value;
        const theme = document.getElementById('previewTheme').value;
        const compact = document.getElementById('previewCompact').checked;
        
        // Update attributes
        if (category) {
            container.dataset.category = category;
        } else {
            delete container.dataset.category;
        }
        
        container.dataset.limit = limit;
        container.dataset.theme = theme;
        container.dataset.compact = compact;
        
        // Reinitialize widget
        new ChessCalendarWidget(container);
        
        window.ChessCalendar.showToast('Виджет обновлен', 'success');
    }
</script>
{% endblock %}
