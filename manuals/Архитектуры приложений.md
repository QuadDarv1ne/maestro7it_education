# üèóÔ∏è –ü–æ–ª–Ω—ã–π –º–∞–Ω—É–∞–ª –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π: –ü–∞—Ç—Ç–µ—Ä–Ω—ã, –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–í–≤–µ–¥–µ–Ω–∏–µ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π](#–≤–≤–µ–¥–µ–Ω–∏–µ-–≤-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
2. [MVC (Model-View-Controller)](#mvc-model-view-controller)
3. [MVVM (Model-View-ViewModel)](#mvvm-model-view-viewmodel)
4. [MVP (Model-View-Presenter)](#mvp-model-view-presenter)
5. [Clean Architecture](#clean-architecture)
6. [Hexagonal Architecture](#hexagonal-architecture)
7. [Onion Architecture](#onion-architecture)
8. [Microservices Architecture](#microservices-architecture)
9. [Event-Driven Architecture](#event-driven-architecture)
10. [–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ-–ø—Ä–∏–º–µ—Ä—ã)
11. [–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏](#–ª—É—á—à–∏–µ-–ø—Ä–∞–∫—Ç–∏–∫–∏)

## –í–≤–µ–¥–µ–Ω–∏–µ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π ‚Äî —ç—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –û–Ω–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, —É–ª—É—á—à–∞—é—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞.

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:**
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- –ü–æ–≤—ã—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏
- –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

## MVC (Model-View-Controller)

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞:
MVC —Ä–∞–∑–¥–µ–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:
- **Model** ‚Äî –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- **View** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **Controller** ‚Äî –ª–æ–≥–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ PHP:
```php
<?php
// Model
class UserModel {
    private $db;
    
    public function __construct($database) {
        $this->db = $database;
    }
    
    public function getUserById($id) {
        $stmt = $this->db->prepare("SELECT * FROM users WHERE id = ?");
        $stmt->execute([$id]);
        return $stmt->fetch(PDO::FETCH_ASSOC);
    }
    
    public function createUser($userData) {
        $stmt = $this->db->prepare(
            "INSERT INTO users (name, email) VALUES (?, ?)"
        );
        $stmt->execute([$userData['name'], $userData['email']]);
        return $this->db->lastInsertId();
    }
}

// View
class UserView {
    public function renderUser($user) {
        return "
        <div class='user-card'>
            <h2>{$user['name']}</h2>
            <p>Email: {$user['email']}</p>
            <p>ID: {$user['id']}</p>
        </div>";
    }
    
    public function renderUserList($users) {
        $html = "<div class='user-list'>";
        foreach ($users as $user) {
            $html .= $this->renderUser($user);
        }
        $html .= "</div>";
        return $html;
    }
}

// Controller
class UserController {
    private $model;
    private $view;
    
    public function __construct($model, $view) {
        $this->model = $model;
        $this->view = $view;
    }
    
    public function showUser($id) {
        $user = $this->model->getUserById($id);
        if ($user) {
            return $this->view->renderUser($user);
        } else {
            return "<p>User not found</p>";
        }
    }
    
    public function createUser($userData) {
        $userId = $this->model->createUser($userData);
        return $this->showUser($userId);
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
$database = new PDO('sqlite:users.db');
$model = new UserModel($database);
$view = new UserView();
$controller = new UserController($model, $view);

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $userData = [
        'name' => $_POST['name'],
        'email' => $_POST['email']
    ];
    echo $controller->createUser($userData);
} else {
    $userId = $_GET['id'] ?? 1;
    echo $controller->showUser($userId);
}
?>
```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ JavaScript/React:
```javascript
// Model
class UserModel {
    constructor() {
        this.users = [];
        this.nextId = 1;
    }
    
    addUser(userData) {
        const user = {
            id: this.nextId++,
            ...userData
        };
        this.users.push(user);
        return user;
    }
    
    getUserById(id) {
        return this.users.find(user => user.id === parseInt(id));
    }
    
    getAllUsers() {
        return this.users;
    }
}

// View (React Component)
const UserListView = ({ users, onSelectUser }) => {
    return (
        <div className="user-list">
            <h2>Users</h2>
            {users.map(user => (
                <div 
                    key={user.id} 
                    className="user-item"
                    onClick={() => onSelectUser(user.id)}
                >
                    <span>{user.name}</span>
                    <span>{user.email}</span>
                </div>
            ))}
        </div>
    );
};

const UserDetailView = ({ user, onBack }) => {
    if (!user) return <div>User not found</div>;
    
    return (
        <div className="user-detail">
            <button onClick={onBack}>Back</button>
            <h2>{user.name}</h2>
            <p>Email: {user.email}</p>
            <p>ID: {user.id}</p>
        </div>
    );
};

// Controller (Container Component)
class UserController extends React.Component {
    constructor(props) {
        super(props);
        this.model = new UserModel();
        this.state = {
            users: [],
            selectedUserId: null
        };
    }
    
    componentDidMount() {
        // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
        const users = [
            { name: 'John Doe', email: 'john@example.com' },
            { name: 'Jane Smith', email: 'jane@example.com' }
        ];
        
        users.forEach(user => this.model.addUser(user));
        this.setState({ users: this.model.getAllUsers() });
    }
    
    handleSelectUser = (userId) => {
        this.setState({ selectedUserId: userId });
    };
    
    handleBack = () => {
        this.setState({ selectedUserId: null });
    };
    
    render() {
        const { users, selectedUserId } = this.state;
        const selectedUser = this.model.getUserById(selectedUserId);
        
        if (selectedUserId) {
            return (
                <UserDetailView 
                    user={selectedUser} 
                    onBack={this.handleBack}
                />
            );
        }
        
        return (
            <UserListView 
                users={users} 
                onSelectUser={this.handleSelectUser}
            />
        );
    }
}
```

## MVVM (Model-View-ViewModel)

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞:
MVVM —Ä–∞–∑–¥–µ–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:
- **Model** ‚Äî –¥–∞–Ω–Ω—ã–µ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- **View** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **ViewModel** ‚Äî –ø–æ—Å—Ä–µ–¥–Ω–∏–∫ –º–µ–∂–¥—É Model –∏ View, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∫–æ–º–∞–Ω–¥—ã

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ JavaScript/Vue.js:
```javascript
// Model
class ProductModel {
    constructor() {
        this.products = [];
        this.nextId = 1;
    }
    
    addProduct(productData) {
        const product = {
            id: this.nextId++,
            ...productData,
            price: parseFloat(productData.price)
        };
        this.products.push(product);
        return product;
    }
    
    getProducts() {
        return this.products;
    }
    
    getProductById(id) {
        return this.products.find(p => p.id === id);
    }
}

// ViewModel
class ProductViewModel {
    constructor() {
        this.model = new ProductModel();
        this.products = Vue.ref([]);
        this.selectedProduct = Vue.ref(null);
        this.newProductName = Vue.ref('');
        this.newProductPrice = Vue.ref('');
    }
    
    async loadProducts() {
        // –ò–º–∏—Ç–∞—Ü–∏—è API –≤—ã–∑–æ–≤–∞
        await new Promise(resolve => setTimeout(resolve, 1000));
        
        const sampleProducts = [
            { name: 'Laptop', price: '999.99' },
            { name: 'Phone', price: '599.99' },
            { name: 'Tablet', price: '399.99' }
        ];
        
        sampleProducts.forEach(product => {
            this.model.addProduct(product);
        });
        
        this.products.value = this.model.getProducts();
    }
    
    selectProduct(productId) {
        this.selectedProduct.value = this.model.getProductById(productId);
    }
    
    addProduct() {
        if (this.newProductName.value && this.newProductPrice.value) {
            const product = this.model.addProduct({
                name: this.newProductName.value,
                price: this.newProductPrice.value
            });
            
            this.products.value = this.model.getProducts();
            this.newProductName.value = '';
            this.newProductPrice.value = '';
        }
    }
    
    clearSelection() {
        this.selectedProduct.value = null;
    }
}

// View (Vue Component)
const ProductList = {
    props: ['products', 'onSelect'],
    template: `
        <div class="product-list">
            <h2>Products</h2>
            <div v-for="product in products" 
                 :key="product.id"
                 class="product-item"
                 @click="onSelect(product.id)">
                <span>{{ product.name }}</span>
                <span class="price">${{ product.price }}</span>
            </div>
        </div>
    `
};

const ProductDetail = {
    props: ['product', 'onBack'],
    template: `
        <div class="product-detail" v-if="product">
            <button @click="onBack">‚Üê Back</button>
            <h2>{{ product.name }}</h2>
            <p class="price">${{ product.price }}</p>
            <p>ID: {{ product.id }}</p>
        </div>
    `
};

const AddProductForm = {
    props: ['name', 'price', 'onNameChange', 'onPriceChange', 'onSubmit'],
    template: `
        <div class="add-product-form">
            <h3>Add New Product</h3>
            <input 
                type="text" 
                placeholder="Product Name"
                :value="name"
                @input="onNameChange($event.target.value)"
            />
            <input 
                type="number" 
                placeholder="Price"
                :value="price"
                @input="onPriceChange($event.target.value)"
            />
            <button @click="onSubmit">Add Product</button>
        </div>
    `
};

// –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
const App = {
    setup() {
        const viewModel = new ProductViewModel();
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
        Vue.onMounted(() => {
            viewModel.loadProducts();
        });
        
        return {
            products: viewModel.products,
            selectedProduct: viewModel.selectedProduct,
            newProductName: viewModel.newProductName,
            newProductPrice: viewModel.newProductPrice,
            
            selectProduct: (id) => viewModel.selectProduct(id),
            clearSelection: () => viewModel.clearSelection(),
            handleNameChange: (value) => viewModel.newProductName.value = value,
            handlePriceChange: (value) => viewModel.newProductPrice.value = value,
            addProduct: () => viewModel.addProduct()
        };
    },
    
    components: {
        ProductList,
        ProductDetail,
        AddProductForm
    },
    
    template: `
        <div id="app">
            <h1>Product Catalog</h1>
            
            <AddProductForm 
                :name="newProductName"
                :price="newProductPrice"
                :onNameChange="handleNameChange"
                :onPriceChange="handlePriceChange"
                :onSubmit="addProduct"
            />
            
            <div class="main-content">
                <ProductList 
                    :products="products"
                    :onSelect="selectProduct"
                />
                
                <ProductDetail 
                    :product="selectedProduct"
                    :onBack="clearSelection"
                />
            </div>
        </div>
    `
};

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
const app = Vue.createApp(App);
app.mount('#app');
```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ C#/.NET:
```csharp
// Model
public class Customer
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Email { get; set; }
    public DateTime CreatedDate { get; set; }
}

// ViewModel
public class CustomerViewModel : INotifyPropertyChanged
{
    private readonly ICustomerService _customerService;
    private ObservableCollection<Customer> _customers;
    private Customer _selectedCustomer;
    private string _searchTerm;
    
    public CustomerViewModel(ICustomerService customerService)
    {
        _customerService = customerService;
        _customers = new ObservableCollection<Customer>();
        LoadCustomersCommand = new RelayCommand(LoadCustomers);
        AddCustomerCommand = new RelayCommand(AddCustomer);
        SearchCommand = new RelayCommand(SearchCustomers);
    }
    
    public ObservableCollection<Customer> Customers
    {
        get => _customers;
        set
        {
            _customers = value;
            OnPropertyChanged();
        }
    }
    
    public Customer SelectedCustomer
    {
        get => _selectedCustomer;
        set
        {
            _selectedCustomer = value;
            OnPropertyChanged();
        }
    }
    
    public string SearchTerm
    {
        get => _searchTerm;
        set
        {
            _searchTerm = value;
            OnPropertyChanged();
        }
    }
    
    public ICommand LoadCustomersCommand { get; }
    public ICommand AddCustomerCommand { get; }
    public ICommand SearchCommand { get; }
    
    private async void LoadCustomers()
    {
        var customers = await _customerService.GetAllCustomersAsync();
        Customers = new ObservableCollection<Customer>(customers);
    }
    
    private async void AddCustomer()
    {
        var newCustomer = new Customer
        {
            Name = "New Customer",
            Email = "new@example.com",
            CreatedDate = DateTime.Now
        };
        
        await _customerService.AddCustomerAsync(newCustomer);
        LoadCustomers(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞
    }
    
    private async void SearchCustomers()
    {
        if (!string.IsNullOrEmpty(SearchTerm))
        {
            var results = await _customerService.SearchCustomersAsync(SearchTerm);
            Customers = new ObservableCollection<Customer>(results);
        }
        else
        {
            LoadCustomers();
        }
    }
    
    public event PropertyChangedEventHandler PropertyChanged;
    
    protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(propertyName));
    }
}

// View (XAML)
<!--
<Window x:Class="CustomerApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- –ü–∞–Ω–µ–ª—å –ø–æ–∏—Å–∫–∞ –∏ –∫–æ–º–∞–Ω–¥ -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10">
            <TextBox Text="{Binding SearchTerm, UpdateSourceTrigger=PropertyChanged}" 
                     Width="200" Margin="0,0,10,0"/>
            <Button Command="{Binding SearchCommand}" Content="Search" Margin="0,0,10,0"/>
            <Button Command="{Binding LoadCustomersCommand}" Content="Refresh"/>
            <Button Command="{Binding AddCustomerCommand}" Content="Add Customer"/>
        </StackPanel>
        
        <!-- –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ -->
        <ListView Grid.Row="1" ItemsSource="{Binding Customers}" 
                  SelectedItem="{Binding SelectedCustomer}"
                  Margin="10">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="ID" DisplayMemberBinding="{Binding Id}" Width="50"/>
                    <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="150"/>
                    <GridViewColumn Header="Email" DisplayMemberBinding="{Binding Email}" Width="200"/>
                    <GridViewColumn Header="Created" DisplayMemberBinding="{Binding CreatedDate, StringFormat=d}" Width="100"/>
                </GridView>
            </ListView.View>
        </ListView>
        
        <!-- –î–µ—Ç–∞–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ -->
        <GroupBox Grid.Row="1" Header="Customer Details" 
                  DataContext="{Binding SelectedCustomer}"
                  HorizontalAlignment="Right" Width="300" Margin="10">
            <StackPanel Margin="10">
                <TextBlock Text="{Binding Name, StringFormat=Name: {0}}" Margin="0,0,0,5"/>
                <TextBlock Text="{Binding Email, StringFormat=Email: {0}}" Margin="0,0,0,5"/>
                <TextBlock Text="{Binding CreatedDate, StringFormat=Created: {0:d}}" Margin="0,0,0,5"/>
            </StackPanel>
        </GroupBox>
    </Grid>
</Window>
-->
```

## MVP (Model-View-Presenter)

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞:
MVP —Ä–∞–∑–¥–µ–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:
- **Model** ‚Äî –¥–∞–Ω–Ω—ã–µ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- **View** ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å IView
- **Presenter** ‚Äî –ø–æ—Å—Ä–µ–¥–Ω–∏–∫ –º–µ–∂–¥—É Model –∏ View

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ Android/Java:
```java
// Model
public class Note {
    private long id;
    private String title;
    private String content;
    private Date createdAt;
    
    // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã, –≥–µ—Ç—Ç–µ—Ä—ã, —Å–µ—Ç—Ç–µ—Ä—ã
    public Note(String title, String content) {
        this.title = title;
        this.content = content;
        this.createdAt = new Date();
    }
    
    // getters and setters...
}

// View Interface
public interface NoteView {
    void showNotes(List<Note> notes);
    void showNoteDetail(Note note);
    void showError(String error);
    void showLoading(boolean show);
    String getTitleInput();
    String getContentInput();
}

// Presenter
public class NotePresenter {
    private NoteView view;
    private NoteRepository repository;
    private List<Note> notes;
    private Note selectedNote;
    
    public NotePresenter(NoteView view, NoteRepository repository) {
        this.view = view;
        this.repository = repository;
        this.notes = new ArrayList<>();
    }
    
    public void loadNotes() {
        view.showLoading(true);
        repository.getAllNotes(new NoteRepository.LoadNotesCallback() {
            @Override
            public void onSuccess(List<Note> loadedNotes) {
                notes.clear();
                notes.addAll(loadedNotes);
                view.showNotes(notes);
                view.showLoading(false);
            }
            
            @Override
            public void onError(Exception e) {
                view.showError("Failed to load notes: " + e.getMessage());
                view.showLoading(false);
            }
        });
    }
    
    public void addNote() {
        String title = view.getTitleInput();
        String content = view.getContentInput();
        
        if (title.isEmpty() || content.isEmpty()) {
            view.showError("Title and content cannot be empty");
            return;
        }
        
        Note newNote = new Note(title, content);
        repository.saveNote(newNote, new NoteRepository.SaveNoteCallback() {
            @Override
            public void onSuccess(Note savedNote) {
                notes.add(savedNote);
                view.showNotes(notes);
                // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
                // view.clearInputFields();
            }
            
            @Override
            public void onError(Exception e) {
                view.showError("Failed to save note: " + e.getMessage());
            }
        });
    }
    
    public void selectNote(Note note) {
        this.selectedNote = note;
        view.showNoteDetail(note);
    }
    
    public void deleteNote(Note note) {
        repository.deleteNote(note, new NoteRepository.DeleteNoteCallback() {
            @Override
            public void onSuccess() {
                notes.remove(note);
                view.showNotes(notes);
                if (selectedNote == note) {
                    selectedNote = null;
                    view.showNoteDetail(null);
                }
            }
            
            @Override
            public void onError(Exception e) {
                view.showError("Failed to delete note: " + e.getMessage());
            }
        });
    }
}

// View Implementation (Activity)
public class NoteListActivity extends AppCompatActivity implements NoteView {
    private RecyclerView recyclerView;
    private NoteAdapter adapter;
    private EditText titleInput;
    private EditText contentInput;
    private ProgressBar progressBar;
    private TextView errorTextView;
    
    private NotePresenter presenter;
    
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_note_list);
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
        initViews();
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–∑–µ–Ω—Ç–µ—Ä–∞
        NoteRepository repository = new NoteRepositoryImpl(this);
        presenter = new NotePresenter(this, repository);
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–∞–ø—Ç–µ—Ä–∞
        adapter = new NoteAdapter(note -> presenter.selectNote(note));
        recyclerView.setAdapter(adapter);
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–º–µ—Ç–æ–∫
        presenter.loadNotes();
    }
    
    private void initViews() {
        recyclerView = findViewById(R.id.recyclerView);
        titleInput = findViewById(R.id.titleInput);
        contentInput = findViewById(R.id.contentInput);
        progressBar = findViewById(R.id.progressBar);
        errorTextView = findViewById(R.id.errorTextView);
        
        recyclerView.setLayoutManager(new LinearLayoutManager(this));
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
        findViewById(R.id.addButton).setOnClickListener(v -> presenter.addNote());
    }
    
    @Override
    public void showNotes(List<Note> notes) {
        adapter.setNotes(notes);
        adapter.notifyDataSetChanged();
    }
    
    @Override
    public void showNoteDetail(Note note) {
        if (note != null) {
            // –û—Ç–∫—Ä—ã—Ç–∏–µ —ç–∫—Ä–∞–Ω–∞ –¥–µ—Ç–∞–ª–µ–π –∑–∞–º–µ—Ç–∫–∏
            Intent intent = new Intent(this, NoteDetailActivity.class);
            intent.putExtra("NOTE_ID", note.getId());
            startActivity(intent);
        }
    }
    
    @Override
    public void showError(String error) {
        errorTextView.setText(error);
        errorTextView.setVisibility(View.VISIBLE);
    }
    
    @Override
    public void showLoading(boolean show) {
        progressBar.setVisibility(show ? View.VISIBLE : View.GONE);
        if (show) {
            errorTextView.setVisibility(View.GONE);
        }
    }
    
    @Override
    public String getTitleInput() {
        return titleInput.getText().toString().trim();
    }
    
    @Override
    public String getContentInput() {
        return contentInput.getText().toString().trim();
    }
}
```

## Clean Architecture

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞:
Clean Architecture —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Å–ª–æ–∏ —Å —á–µ—Ç–∫–∏–º–∏ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏:
- **Entities** ‚Äî –±–∏–∑–Ω–µ—Å-–æ–±—ä–µ–∫—Ç—ã
- **Use Cases** ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Interface Adapters** ‚Äî –∞–¥–∞–ø—Ç–µ—Ä—ã –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- **Frameworks & Drivers** ‚Äî –≤–Ω–µ—à–Ω–∏–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ Java/Spring Boot:
```java
// Domain Layer (Entities)
package com.example.domain.entity;

public class User {
    private Long id;
    private String username;
    private String email;
    private String passwordHash;
    private LocalDateTime createdAt;
    private boolean isActive;
    
    // Business methods
    public boolean isValid() {
        return username != null && !username.trim().isEmpty() &&
               email != null && email.contains("@") &&
               passwordHash != null && passwordHash.length() >= 8;
    }
    
    public void deactivate() {
        this.isActive = false;
    }
    
    // constructors, getters, setters...
}

// Domain Layer (Interfaces/Ports)
package com.example.domain.port;

import com.example.domain.entity.User;
import java.util.List;
import java.util.Optional;

public interface UserRepository {
    Optional<User> findById(Long id);
    List<User> findAll();
    User save(User user);
    void deleteById(Long id);
    Optional<User> findByUsername(String username);
}

// Application Layer (Use Cases)
package com.example.application.service;

import com.example.domain.entity.User;
import com.example.domain.port.UserRepository;
import com.example.application.dto.CreateUserRequest;
import com.example.application.dto.UserResponse;
import org.springframework.stereotype.Service;

@Service
public class UserService {
    private final UserRepository userRepository;
    private final PasswordEncoder passwordEncoder;
    
    public UserService(UserRepository userRepository, PasswordEncoder passwordEncoder) {
        this.userRepository = userRepository;
        this.passwordEncoder = passwordEncoder;
    }
    
    public UserResponse createUser(CreateUserRequest request) {
        // –í–∞–ª–∏–¥–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª
        if (userRepository.findByUsername(request.getUsername()).isPresent()) {
            throw new IllegalArgumentException("Username already exists");
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        User user = new User();
        user.setUsername(request.getUsername());
        user.setEmail(request.getEmail());
        user.setPasswordHash(passwordEncoder.encode(request.getPassword()));
        user.setCreatedAt(LocalDateTime.now());
        user.setActive(true);
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        User savedUser = userRepository.save(user);
        
        return mapToResponse(savedUser);
    }
    
    public UserResponse getUserById(Long id) {
        return userRepository.findById(id)
            .map(this::mapToResponse)
            .orElseThrow(() -> new UserNotFoundException("User not found: " + id));
    }
    
    private UserResponse mapToResponse(User user) {
        return new UserResponse(
            user.getId(),
            user.getUsername(),
            user.getEmail(),
            user.getCreatedAt(),
            user.isActive()
        );
    }
}

// Infrastructure Layer (Adapters)
package com.example.infrastructure.persistence;

import com.example.domain.entity.User;
import com.example.domain.port.UserRepository;
import org.springframework.stereotype.Repository;

@Repository
public class JpaUserRepository implements UserRepository {
    private final UserJpaRepository jpaRepository;
    
    public JpaUserRepository(UserJpaRepository jpaRepository) {
        this.jpaRepository = jpaRepository;
    }
    
    @Override
    public Optional<User> findById(Long id) {
        return jpaRepository.findById(id)
            .map(this::mapToDomain);
    }
    
    @Override
    public User save(User user) {
        UserEntity entity = mapToEntity(user);
        UserEntity savedEntity = jpaRepository.save(entity);
        return mapToDomain(savedEntity);
    }
    
    // –ú–µ—Ç–æ–¥—ã –º–∞–ø–ø–∏–Ω–≥–∞ –º–µ–∂–¥—É entity –∏ domain –æ–±—ä–µ–∫—Ç–∞–º–∏
    private User mapToDomain(UserEntity entity) {
        User user = new User();
        user.setId(entity.getId());
        user.setUsername(entity.getUsername());
        user.setEmail(entity.getEmail());
        // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
        return user;
    }
    
    private UserEntity mapToEntity(User user) {
        UserEntity entity = new UserEntity();
        entity.setId(user.getId());
        entity.setUsername(user.getUsername());
        entity.setEmail(user.getEmail());
        // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
        return entity;
    }
}

// Presentation Layer (Controllers)
package com.example.presentation.controller;

import com.example.application.dto.CreateUserRequest;
import com.example.application.dto.UserResponse;
import com.example.application.service.UserService;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/api/users")
public class UserController {
    private final UserService userService;
    
    public UserController(UserService userService) {
        this.userService = userService;
    }
    
    @PostMapping
    public ResponseEntity<UserResponse> createUser(@RequestBody CreateUserRequest request) {
        UserResponse response = userService.createUser(request);
        return ResponseEntity.ok(response);
    }
    
    @GetMapping("/{id}")
    public ResponseEntity<UserResponse> getUser(@PathVariable Long id) {
        UserResponse response = userService.getUserById(id);
        return ResponseEntity.ok(response);
    }
}
```

## Hexagonal Architecture

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞:
Hexagonal Architecture (–ü–æ—Ä—Ç –∏ –∞–¥–∞–ø—Ç–µ—Ä) –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–æ–∫—Ä—É–≥ –ø–æ—Ä—Ç–æ–≤ –∏ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤:
- **Core Domain** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- **Ports** ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- **Adapters** ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Ä—Ç–æ–≤ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ Node.js:
```javascript
// Domain (Core Business Logic)
class Order {
    constructor(id, customerId, items, totalAmount) {
        this.id = id;
        this.customerId = customerId;
        this.items = items;
        this.totalAmount = totalAmount;
        this.status = 'pending';
        this.createdAt = new Date();
    }
    
    confirm() {
        if (this.status !== 'pending') {
            throw new Error('Order cannot be confirmed');
        }
        this.status = 'confirmed';
    }
    
    cancel() {
        if (this.status === 'shipped') {
            throw new Error('Cannot cancel shipped order');
        }
        this.status = 'cancelled';
    }
    
    ship() {
        if (this.status !== 'confirmed') {
            throw new Error('Order must be confirmed before shipping');
        }
        this.status = 'shipped';
    }
}

// Ports (Interfaces)
class OrderRepository {
    async save(order) {
        throw new Error('Not implemented');
    }
    
    async findById(id) {
        throw new Error('Not implemented');
    }
    
    async findByCustomerId(customerId) {
        throw new Error('Not implemented');
    }
}

class PaymentService {
    async processPayment(order, paymentDetails) {
        throw new Error('Not implemented');
    }
}

class NotificationService {
    async sendOrderConfirmation(order) {
        throw new Error('Not implemented');
    }
    
    async sendShippingNotification(order) {
        throw new Error('Not implemented');
    }
}

// Application Service (Use Cases)
class OrderService {
    constructor(orderRepository, paymentService, notificationService) {
        this.orderRepository = orderRepository;
        this.paymentService = paymentService;
        this.notificationService = notificationService;
    }
    
    async createOrder(customerId, items) {
        // Calculate total amount
        const totalAmount = items.reduce((sum, item) => 
            sum + (item.price * item.quantity), 0);
        
        // Create order
        const order = new Order(
            this.generateOrderId(),
            customerId,
            items,
            totalAmount
        );
        
        // Save order
        await this.orderRepository.save(order);
        
        return order;
    }
    
    async processOrder(orderId, paymentDetails) {
        const order = await this.orderRepository.findById(orderId);
        if (!order) {
            throw new Error('Order not found');
        }
        
        // Process payment
        const paymentResult = await this.paymentService.processPayment(
            order, 
            paymentDetails
        );
        
        if (paymentResult.success) {
            order.confirm();
            await this.orderRepository.save(order);
            
            // Send confirmation
            await this.notificationService.sendOrderConfirmation(order);
            
            return order;
        } else {
            throw new Error('Payment failed: ' + paymentResult.errorMessage);
        }
    }
    
    async shipOrder(orderId) {
        const order = await this.orderRepository.findById(orderId);
        if (!order) {
            throw new Error('Order not found');
        }
        
        order.ship();
        await this.orderRepository.save(order);
        
        // Send shipping notification
        await this.notificationService.sendShippingNotification(order);
        
        return order;
    }
    
    generateOrderId() {
        return 'ORD-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
    }
}

// Adapters (Implementations)
class MongoOrderRepository extends OrderRepository {
    constructor(mongoClient) {
        super();
        this.collection = mongoClient.db('ecommerce').collection('orders');
    }
    
    async save(order) {
        const orderData = {
            _id: order.id,
            customerId: order.customerId,
            items: order.items,
            totalAmount: order.totalAmount,
            status: order.status,
            createdAt: order.createdAt
        };
        
        await this.collection.replaceOne(
            { _id: order.id },
            orderData,
            { upsert: true }
        );
        
        return order;
    }
    
    async findById(id) {
        const doc = await this.collection.findOne({ _id: id });
        if (!doc) return null;
        
        return new Order(
            doc._id,
            doc.customerId,
            doc.items,
            doc.totalAmount,
            doc.status,
            doc.createdAt
        );
    }
    
    async findByCustomerId(customerId) {
        const docs = await this.collection.find({ customerId }).toArray();
        return docs.map(doc => new Order(
            doc._id,
            doc.customerId,
            doc.items,
            doc.totalAmount,
            doc.status,
            doc.createdAt
        ));
    }
}

class StripePaymentService extends PaymentService {
    constructor(stripeApiKey) {
        super();
        this.stripe = require('stripe')(stripeApiKey);
    }
    
    async processPayment(order, paymentDetails) {
        try {
            const paymentIntent = await this.stripe.paymentIntents.create({
                amount: Math.round(order.totalAmount * 100), // cents
                currency: 'usd',
                payment_method: paymentDetails.paymentMethodId,
                confirm: true
            });
            
            return {
                success: paymentIntent.status === 'succeeded',
                transactionId: paymentIntent.id
            };
        } catch (error) {
            return {
                success: false,
                errorMessage: error.message
            };
        }
    }
}

class EmailNotificationService extends NotificationService {
    constructor(emailService) {
        super();
        this.emailService = emailService;
    }
    
    async sendOrderConfirmation(order) {
        const emailContent = `
            <h1>Order Confirmation</h1>
            <p>Your order ${order.id} has been confirmed!</p>
            <p>Total: $${order.totalAmount.toFixed(2)}</p>
        `;
        
        await this.emailService.send({
            to: order.customerId, // assuming customerId is email
            subject: `Order Confirmation - ${order.id}`,
            html: emailContent
        });
    }
    
    async sendShippingNotification(order) {
        const emailContent = `
            <h1>Order Shipped</h1>
            <p>Your order ${order.id} has been shipped!</p>
        `;
        
        await this.emailService.send({
            to: order.customerId,
            subject: `Order Shipped - ${order.id}`,
            html: emailContent
        });
    }
}

// Application Setup
const express = require('express');
const { MongoClient } = require('mongodb');
const Stripe = require('stripe');

async function createApp() {
    // Setup infrastructure
    const mongoClient = new MongoClient('mongodb://localhost:27017');
    await mongoClient.connect();
    
    const stripe = new Stripe(process.env.STRIPE_SECRET_KEY);
    
    // Create adapters
    const orderRepository = new MongoOrderRepository(mongoClient);
    const paymentService = new StripePaymentService(stripe.secretKey);
    const notificationService = new EmailNotificationService(/* email service */);
    
    // Create application service
    const orderService = new OrderService(
        orderRepository,
        paymentService,
        notificationService
    );
    
    // Create Express app
    const app = express();
    app.use(express.json());
    
    // Routes
    app.post('/orders', async (req, res) => {
        try {
            const order = await orderService.createOrder(
                req.body.customerId,
                req.body.items
            );
            res.status(201).json(order);
        } catch (error) {
            res.status(400).json({ error: error.message });
        }
    });
    
    app.post('/orders/:id/process', async (req, res) => {
        try {
            const order = await orderService.processOrder(
                req.params.id,
                req.body.paymentDetails
            );
            res.json(order);
        } catch (error) {
            res.status(400).json({ error: error.message });
        }
    });
    
    app.post('/orders/:id/ship', async (req, res) => {
        try {
            const order = await orderService.shipOrder(req.params.id);
            res.json(order);
        } catch (error) {
            res.status(400).json({ error: error.message });
        }
    });
    
    return app;
}

// Start application
createApp().then(app => {
    app.listen(3000, () => {
        console.log('Server running on port 3000');
    });
});
```

## Onion Architecture

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞:
Onion Architecture –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –≤–∏–¥–µ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Å–ª–æ–µ–≤:
- **Domain Core** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ –±–∏–∑–Ω–µ—Å-–æ–±—ä–µ–∫—Ç—ã –∏ –ø—Ä–∞–≤–∏–ª–∞
- **Domain Services** ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- **Application Services** ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è use cases
- **Infrastructure** ‚Äî –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **Presentation** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ Python/Django:
```python
# Domain Layer
# models.py
from dataclasses import dataclass
from datetime import datetime
from typing import List, Optional
from enum import Enum

class OrderStatus(Enum):
    PENDING = "pending"
    CONFIRMED = "confirmed"
    SHIPPED = "shipped"
    DELIVERED = "delivered"
    CANCELLED = "cancelled"

@dataclass
class Customer:
    id: Optional[int]
    name: str
    email: str
    phone: Optional[str]
    created_at: datetime = None
    
    def __post_init__(self):
        if self.created_at is None:
            self.created_at = datetime.now()
    
    def is_valid(self) -> bool:
        return bool(self.name and self.email and '@' in self.email)

@dataclass
class OrderItem:
    product_id: int
    quantity: int
    unit_price: float
    
    @property
    def total_price(self) -> float:
        return self.quantity * self.unit_price

@dataclass
class Order:
    id: Optional[int]
    customer_id: int
    items: List[OrderItem]
    status: OrderStatus = OrderStatus.PENDING
    created_at: datetime = None
    
    def __post_init__(self):
        if self.created_at is None:
            self.created_at = datetime.now()
    
    @property
    def total_amount(self) -> float:
        return sum(item.total_price for item in self.items)
    
    def confirm(self):
        if self.status != OrderStatus.PENDING:
            raise ValueError("Order cannot be confirmed")
        self.status = OrderStatus.CONFIRMED
    
    def cancel(self):
        if self.status == OrderStatus.SHIPPED:
            raise ValueError("Cannot cancel shipped order")
        self.status = OrderStatus.CANCELLED
    
    def ship(self):
        if self.status != OrderStatus.CONFIRMED:
            raise ValueError("Order must be confirmed before shipping")
        self.status = OrderStatus.SHIPPED

# Domain Services
# services.py
from typing import Protocol, List
from .models import Customer, Order

class CustomerRepository(Protocol):
    def save(self, customer: Customer) -> Customer:
        ...
    
    def find_by_id(self, customer_id: int) -> Optional[Customer]:
        ...
    
    def find_by_email(self, email: str) -> Optional[Customer]:
        ...

class OrderRepository(Protocol):
    def save(self, order: Order) -> Order:
        ...
    
    def find_by_id(self, order_id: int) -> Optional[Order]:
        ...
    
    def find_by_customer_id(self, customer_id: int) -> List[Order]:
        ...

class PaymentService(Protocol):
    def process_payment(self, order: Order, payment_details: dict) -> bool:
        ...

# Application Layer
# use_cases.py
from typing import List
from .models import Customer, Order, OrderItem
from .services import CustomerRepository, OrderRepository, PaymentService

class CustomerService:
    def __init__(self, customer_repository: CustomerRepository):
        self.customer_repository = customer_repository
    
    def register_customer(self, name: str, email: str, phone: str = None) -> Customer:
        # Business validation
        existing_customer = self.customer_repository.find_by_email(email)
        if existing_customer:
            raise ValueError("Customer with this email already exists")
        
        customer = Customer(id=None, name=name, email=email, phone=phone)
        if not customer.is_valid():
            raise ValueError("Invalid customer data")
        
        return self.customer_repository.save(customer)
    
    def get_customer(self, customer_id: int) -> Customer:
        customer = self.customer_repository.find_by_id(customer_id)
        if not customer:
            raise ValueError(f"Customer {customer_id} not found")
        return customer

class OrderService:
    def __init__(
        self, 
        order_repository: OrderRepository,
        customer_repository: CustomerRepository,
        payment_service: PaymentService
    ):
        self.order_repository = order_repository
        self.customer_repository = customer_repository
        self.payment_service = payment_service
    
    def create_order(self, customer_id: int, items: List[OrderItem]) -> Order:
        # Validate customer exists
        customer = self.customer_repository.find_by_id(customer_id)
        if not customer:
            raise ValueError("Customer not found")
        
        # Create order
        order = Order(
            id=None,
            customer_id=customer_id,
            items=items
        )
        
        return self.order_repository.save(order)
    
    def process_order_payment(self, order_id: int, payment_details: dict) -> Order:
        order = self.order_repository.find_by_id(order_id)
        if not order:
            raise ValueError("Order not found")
        
        # Process payment
        payment_success = self.payment_service.process_payment(order, payment_details)
        if not payment_success:
            raise ValueError("Payment processing failed")
        
        # Confirm order
        order.confirm()
        return self.order_repository.save(order)
    
    def ship_order(self, order_id: int) -> Order:
        order = self.order_repository.find_by_id(order_id)
        if not order:
            raise ValueError("Order not found")
        
        order.ship()
        return self.order_repository.save(order)

# Infrastructure Layer
# repositories.py
from typing import Optional, List
from django.db import transaction
from .models import Customer, Order
from .services import CustomerRepository, OrderRepository

class DjangoCustomerRepository(CustomerRepository):
    @transaction.atomic
    def save(self, customer: Customer) -> Customer:
        from . import models  # Avoid circular imports
        
        if customer.id:
            db_customer = models.Customer.objects.get(id=customer.id)
            db_customer.name = customer.name
            db_customer.email = customer.email
            db_customer.phone = customer.phone
        else:
            db_customer = models.Customer(
                name=customer.name,
                email=customer.email,
                phone=customer.phone
            )
        
        db_customer.save()
        customer.id = db_customer.id
        return customer
    
    def find_by_id(self, customer_id: int) -> Optional[Customer]:
        try:
            from . import models
            db_customer = models.Customer.objects.get(id=customer_id)
            return Customer(
                id=db_customer.id,
                name=db_customer.name,
                email=db_customer.email,
                phone=db_customer.phone,
                created_at=db_customer.created_at
            )
        except models.Customer.DoesNotExist:
            return None
    
    def find_by_email(self, email: str) -> Optional[Customer]:
        try:
            from . import models
            db_customer = models.Customer.objects.get(email=email)
            return Customer(
                id=db_customer.id,
                name=db_customer.name,
                email=db_customer.email,
                phone=db_customer.phone,
                created_at=db_customer.created_at
            )
        except models.Customer.DoesNotExist:
            return None

class DjangoOrderRepository(OrderRepository):
    @transaction.atomic
    def save(self, order: Order) -> Order:
        from . import models
        
        if order.id:
            db_order = models.Order.objects.get(id=order.id)
        else:
            db_order = models.Order(customer_id=order.customer_id)
        
        db_order.status = order.status.value
        db_order.save()
        
        # Save order items
        db_order.items.all().delete()  # Clear existing items
        for item in order.items:
            models.OrderItem.objects.create(
                order=db_order,
                product_id=item.product_id,
                quantity=item.quantity,
                unit_price=item.unit_price
            )
        
        order.id = db_order.id
        return order
    
    def find_by_id(self, order_id: int) -> Optional[Order]:
        try:
            from . import models
            db_order = models.Order.objects.prefetch_related('items').get(id=order_id)
            
            items = [
                OrderItem(
                    product_id=item.product_id,
                    quantity=item.quantity,
                    unit_price=float(item.unit_price)
                )
                for item in db_order.items.all()
            ]
            
            return Order(
                id=db_order.id,
                customer_id=db_order.customer_id,
                items=items,
                status=getattr(models.OrderStatus, db_order.status.upper()),
                created_at=db_order.created_at
            )
        except models.Order.DoesNotExist:
            return None
    
    def find_by_customer_id(self, customer_id: int) -> List[Order]:
        from . import models
        db_orders = models.Order.objects.filter(customer_id=customer_id).prefetch_related('items')
        
        orders = []
        for db_order in db_orders:
            items = [
                OrderItem(
                    product_id=item.product_id,
                    quantity=item.quantity,
                    unit_price=float(item.unit_price)
                )
                for item in db_order.items.all()
            ]
            
            orders.append(Order(
                id=db_order.id,
                customer_id=db_order.customer_id,
                items=items,
                status=getattr(models.OrderStatus, db_order.status.upper()),
                created_at=db_order.created_at
            ))
        
        return orders

# Django Models (Infrastructure)
# models.py (Django models)
from django.db import models

class Customer(models.Model):
    name = models.CharField(max_length=100)
    email = models.EmailField(unique=True)
    phone = models.CharField(max_length=20, blank=True, null=True)
    created_at = models.DateTimeField(auto_now_add=True)

class Order(models.Model):
    class OrderStatus(models.TextChoices):
        PENDING = 'pending', 'Pending'
        CONFIRMED = 'confirmed', 'Confirmed'
        SHIPPED = 'shipped', 'Shipped'
        DELIVERED = 'delivered', 'Delivered'
        CANCELLED = 'cancelled', 'Cancelled'
    
    customer = models.ForeignKey(Customer, on_delete=models.CASCADE)
    status = models.CharField(
        max_length=20, 
        choices=OrderStatus.choices, 
        default=OrderStatus.PENDING
    )
    created_at = models.DateTimeField(auto_now_add=True)

class OrderItem(models.Model):
    order = models.ForeignKey(Order, related_name='items', on_delete=models.CASCADE)
    product_id = models.IntegerField()
    quantity = models.PositiveIntegerField()
    unit_price = models.DecimalField(max_digits=10, decimal_places=2)

# Presentation Layer (Django Views)
# views.py
from django.http import JsonResponse
from django.views.decorators.csrf import csrf_exempt
from django.utils.decorators import method_decorator
from django.views import View
import json

@method_decorator(csrf_exempt, name='dispatch')
class CustomerView(View):
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        from .services import CustomerService
        from .repositories import DjangoCustomerRepository
        
        self.customer_service = CustomerService(
            customer_repository=DjangoCustomerRepository()
        )
    
    def post(self, request):
        try:
            data = json.loads(request.body)
            customer = self.customer_service.register_customer(
                name=data['name'],
                email=data['email'],
                phone=data.get('phone')
            )
            return JsonResponse({
                'id': customer.id,
                'name': customer.name,
                'email': customer.email,
                'created_at': customer.created_at.isoformat()
            }, status=201)
        except ValueError as e:
            return JsonResponse({'error': str(e)}, status=400)
        except Exception as e:
            return JsonResponse({'error': 'Internal server error'}, status=500)

@method_decorator(csrf_exempt, name='dispatch')
class OrderView(View):
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        from .services import OrderService
        from .repositories import DjangoCustomerRepository, DjangoOrderRepository
        from .payment import DummyPaymentService  # Infrastructure implementation
        
        self.order_service = OrderService(
            order_repository=DjangoOrderRepository(),
            customer_repository=DjangoCustomerRepository(),
            payment_service=DummyPaymentService()
        )
    
    def post(self, request):
        try:
            data = json.loads(request.body)
            # Convert dict items to OrderItem objects
            items = [
                OrderItem(
                    product_id=item['product_id'],
                    quantity=item['quantity'],
                    unit_price=float(item['unit_price'])
                )
                for item in data['items']
            ]
            
            order = self.order_service.create_order(
                customer_id=data['customer_id'],
                items=items
            )
            
            return JsonResponse({
                'id': order.id,
                'customer_id': order.customer_id,
                'total_amount': order.total_amount,
                'status': order.status.value,
                'created_at': order.created_at.isoformat()
            }, status=201)
        except ValueError as e:
            return JsonResponse({'error': str(e)}, status=400)
        except Exception as e:
            return JsonResponse({'error': 'Internal server error'}, status=500)
```

## Microservices Architecture

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞:
Microservices Architecture —Ä–∞–∑–±–∏–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –±–∏–∑–Ω–µ—Å-—Ñ—É–Ω–∫—Ü–∏—é.

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ Go:
```go
// User Service
package main

import (
    "encoding/json"
    "fmt"
    "log"
    "net/http"
    "github.com/gorilla/mux"
    "gorm.io/gorm"
    "gorm.io/driver/postgres"
)

type User struct {
    ID       uint   `json:"id" gorm:"primaryKey"`
    Username string `json:"username" gorm:"unique"`
    Email    string `json:"email" gorm:"unique"`
    Password string `json:"-"` // –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–∞—Ä–æ–ª—å –≤ –æ—Ç–≤–µ—Ç–∞—Ö
}

type UserService struct {
    db *gorm.DB
}

func NewUserService(db *gorm.DB) *UserService {
    return &UserService{db: db}
}

func (s *UserService) CreateUser(w http.ResponseWriter, r *http.Request) {
    var user User
    if err := json.NewDecoder(r.Body).Decode(&user); err != nil {
        http.Error(w, err.Error(), http.StatusBadRequest)
        return
    }
    
    // –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    if user.Username == "" || user.Email == "" {
        http.Error(w, "Username and email are required", http.StatusBadRequest)
        return
    }
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if err := s.db.Create(&user).Error; err != nil {
        http.Error(w, err.Error(), http.StatusInternalServerError)
        return
    }
    
    w.Header().Set("Content-Type", "application/json")
    w.WriteHeader(http.StatusCreated)
    json.NewEncoder(w).Encode(user)
}

func (s *UserService) GetUser(w http.ResponseWriter, r *http.Request) {
    vars := mux.Vars(r)
    id := vars["id"]
    
    var user User
    if err := s.db.First(&user, id).Error; err != nil {
        http.Error(w, "User not found", http.StatusNotFound)
        return
    }
    
    w.Header().Set("Content-Type", "application/json")
    json.NewEncoder(w).Encode(user)
}

func main() {
    // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    dsn := "host=localhost user=postgres password=postgres dbname=user_service port=5432 sslmode=disable"
    db, err := gorm.Open(postgres.Open(dsn), &gorm.Config{})
    if err != nil {
        log.Fatal("Failed to connect to database:", err)
    }
    
    // –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã
    db.AutoMigrate(&User{})
    
    // –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
    userService := NewUserService(db)
    
    // –†–æ—É—Ç–∏–Ω–≥
    r := mux.NewRouter()
    r.HandleFunc("/users", userService.CreateUser).Methods("POST")
    r.HandleFunc("/users/{id}", userService.GetUser).Methods("GET")
    
    fmt.Println("User service starting on :8080")
    log.Fatal(http.ListenAndServe(":8080", r))
}

// Order Service
package main

import (
    "encoding/json"
    "fmt"
    "log"
    "net/http"
    "strconv"
    "github.com/gorilla/mux"
    "gorm.io/gorm"
    "gorm.io/driver/postgres"
)

type Order struct {
    ID         uint   `json:"id" gorm:"primaryKey"`
    UserID     uint   `json:"user_id"`
    ProductID  uint   `json:"product_id"`
    Quantity   int    `json:"quantity"`
    TotalPrice string `json:"total_price"`
    Status     string `json:"status" gorm:"default:'pending'"`
}

type OrderService struct {
    db *gorm.DB
}

func NewOrderService(db *gorm.DB) *OrderService {
    return &OrderService{db: db}
}

func (s *OrderService) CreateOrder(w http.ResponseWriter, r *http.Request) {
    var order Order
    if err := json.NewDecoder(r.Body).Decode(&order); err != nil {
        http.Error(w, err.Error(), http.StatusBadRequest)
        return
    }
    
    // –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if !s.userExists(order.UserID) {
        http.Error(w, "User not found", http.StatusBadRequest)
        return
    }
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
    if err := s.db.Create(&order).Error; err != nil {
        http.Error(w, err.Error(), http.StatusInternalServerError)
        return
    }
    
    w.Header().Set("Content-Type", "application/json")
    w.WriteHeader(http.StatusCreated)
    json.NewEncoder(w).Encode(order)
}

func (s *OrderService) GetOrder(w http.ResponseWriter, r *http.Request) {
    vars := mux.Vars(r)
    id := vars["id"]
    
    var order Order
    if err := s.db.Preload("User").First(&order, id).Error; err != nil {
        http.Error(w, "Order not found", http.StatusNotFound)
        return
    }
    
    w.Header().Set("Content-Type", "application/json")
    json.NewEncoder(w).Encode(order)
}

func (s *OrderService) userExists(userID uint) bool {
    // –ó–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–∑–æ–≤ User Service —á–µ—Ä–µ–∑ HTTP/API
    // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–≥–ª—É—à–∫—É
    return userID > 0
}

func main() {
    // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    dsn := "host=localhost user=postgres password=postgres dbname=order_service port=5433 sslmode=disable"
    db, err := gorm.Open(postgres.Open(dsn), &gorm.Config{})
    if err != nil {
        log.Fatal("Failed to connect to database:", err)
    }
    
    // –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã
    db.AutoMigrate(&Order{})
    
    // –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
    orderService := NewOrderService(db)
    
    // –†–æ—É—Ç–∏–Ω–≥
    r := mux.NewRouter()
    r.HandleFunc("/orders", orderService.CreateOrder).Methods("POST")
    r.HandleFunc("/orders/{id}", orderService.GetOrder).Methods("GET")
    
    fmt.Println("Order service starting on :8081")
    log.Fatal(http.ListenAndServe(":8081", r))
}

// API Gateway
package main

import (
    "encoding/json"
    "fmt"
    "io/ioutil"
    "log"
    "net/http"
    "net/http/httputil"
    "net/url"
    "strings"
)

type Gateway struct {
    userServiceURL  *url.URL
    orderServiceURL *url.URL
}

func NewGateway(userURL, orderURL string) (*Gateway, error) {
    userServiceURL, err := url.Parse(userURL)
    if err != nil {
        return nil, err
    }
    
    orderServiceURL, err := url.Parse(orderURL)
    if err != nil {
        return nil, err
    }
    
    return &Gateway{
        userServiceURL:  userServiceURL,
        orderServiceURL: orderServiceURL,
    }, nil
}

func (g *Gateway) ServeHTTP(w http.ResponseWriter, r *http.Request) {
    // –õ–æ–≥–∏–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
    if strings.HasPrefix(r.URL.Path, "/api/users") {
        g.proxyToUserService(w, r)
    } else if strings.HasPrefix(r.URL.Path, "/api/orders") {
        g.proxyToOrderService(w, r)
    } else {
        http.Error(w, "Not found", http.StatusNotFound)
    }
}

func (g *Gateway) proxyToUserService(w http.ResponseWriter, r *http.Request) {
    proxy := httputil.NewSingleHostReverseProxy(g.userServiceURL)
    r.URL.Path = strings.TrimPrefix(r.URL.Path, "/api")
    proxy.ServeHTTP(w, r)
}

func (g *Gateway) proxyToOrderService(w http.ResponseWriter, r *http.Request) {
    proxy := httputil.NewSingleHostReverseProxy(g.orderServiceURL)
    r.URL.Path = strings.TrimPrefix(r.URL.Path, "/api")
    proxy.ServeHTTP(w, r)
}

func main() {
    gateway, err := NewGateway(
        "http://localhost:8080",
        "http://localhost:8081",
    )
    if err != nil {
        log.Fatal("Failed to create gateway:", err)
    }
    
    fmt.Println("API Gateway starting on :8000")
    log.Fatal(http.ListenAndServe(":8000", gateway))
}
```

## Event-Driven Architecture

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞:
Event-Driven Architecture –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ, –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∏ —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è.

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ Node.js —Å RabbitMQ:
```javascript
// Event Publisher
const amqp = require('amqplib');

class EventPublisher {
    constructor(rabbitmqUrl) {
        this.rabbitmqUrl = rabbitmqUrl;
        this.connection = null;
        this.channel = null;
    }
    
    async connect() {
        this.connection = await amqp.connect(this.rabbitmqUrl);
        this.channel = await this.connection.createChannel();
    }
    
    async publishEvent(eventName, eventData) {
        const exchange = 'app_events';
        const routingKey = eventName;
        
        await this.channel.assertExchange(exchange, 'topic', { durable: true });
        
        const message = {
            event: eventName,
            data: eventData,
            timestamp: new Date().toISOString(),
            id: this.generateEventId()
        };
        
        this.channel.publish(
            exchange,
            routingKey,
            Buffer.from(JSON.stringify(message)),
            { persistent: true }
        );
        
        console.log(`Published event: ${eventName}`, message);
    }
    
    generateEventId() {
        return 'evt_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    }
    
    async close() {
        if (this.channel) await this.channel.close();
        if (this.connection) await this.connection.close();
    }
}

// Event Consumer
class EventConsumer {
    constructor(rabbitmqUrl) {
        this.rabbitmqUrl = rabbitmqUrl;
        this.handlers = new Map();
    }
    
    registerHandler(eventName, handler) {
        if (!this.handlers.has(eventName)) {
            this.handlers.set(eventName, []);
        }
        this.handlers.get(eventName).push(handler);
    }
    
    async consumeEvents() {
        const connection = await amqp.connect(this.rabbitmqUrl);
        const channel = await connection.createChannel();
        
        const exchange = 'app_events';
        const queue = 'event_processing_queue';
        
        await channel.assertExchange(exchange, 'topic', { durable: true });
        await channel.assertQueue(queue, { durable: true });
        
        // –ü—Ä–∏–≤—è–∑–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –∫ exchange
        await channel.bindQueue(queue, exchange, '#');
        
        channel.consume(queue, async (msg) => {
            if (msg !== null) {
                try {
                    const event = JSON.parse(msg.content.toString());
                    console.log(`Received event: ${event.event}`, event);
                    
                    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è
                    await this.handleEvent(event);
                    
                    // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
                    channel.ack(msg);
                } catch (error) {
                    console.error('Error processing event:', error);
                    channel.nack(msg, false, true); // Requeue message
                }
            }
        });
    }
    
    async handleEvent(event) {
        const handlers = this.handlers.get(event.event) || [];
        
        // –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏
        const promises = handlers.map(handler => 
            handler(event.data, event)
        );
        
        await Promise.all(promises);
    }
}

// Domain Services —Å —Å–æ–±—ã—Ç–∏—è–º–∏
class OrderService {
    constructor(eventPublisher) {
        this.eventPublisher = eventPublisher;
    }
    
    async createOrder(orderData) {
        // –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞
        const order = {
            id: this.generateOrderId(),
            ...orderData,
            status: 'created',
            createdAt: new Date()
        };
        
        // –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è
        await this.eventPublisher.publishEvent('order.created', {
            orderId: order.id,
            customerId: order.customerId,
            totalAmount: order.totalAmount
        });
        
        return order;
    }
    
    async confirmOrder(orderId) {
        // –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
        const order = await this.getOrderById(orderId);
        order.status = 'confirmed';
        
        // –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è
        await this.eventPublisher.publishEvent('order.confirmed', {
            orderId: order.id,
            customerId: order.customerId
        });
        
        return order;
    }
    
    async shipOrder(orderId) {
        // –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞
        const order = await this.getOrderById(orderId);
        order.status = 'shipped';
        
        // –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è
        await this.eventPublisher.publishEvent('order.shipped', {
            orderId: order.id,
            customerId: order.customerId,
            trackingNumber: this.generateTrackingNumber()
        });
        
        return order;
    }
    
    generateOrderId() {
        return 'ORD-' + Date.now();
    }
    
    generateTrackingNumber() {
        return 'TRK-' + Math.random().toString(36).substr(2, 9).toUpperCase();
    }
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
class NotificationService {
    async handleOrderCreated(eventData) {
        console.log(`Sending notification for created order ${eventData.orderId}`);
        // –õ–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    }
    
    async handleOrderConfirmed(eventData) {
        console.log(`Sending confirmation for order ${eventData.orderId}`);
        // –õ–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    }
    
    async handleOrderShipped(eventData) {
        console.log(`Sending shipping notification for order ${eventData.orderId}`);
        // –õ–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—Ç–ø—Ä–∞–≤–∫–µ
    }
}

class InventoryService {
    async handleOrderCreated(eventData) {
        console.log(`Reserving inventory for order ${eventData.orderId}`);
        // –õ–æ–≥–∏–∫–∞ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
    }
    
    async handleOrderCancelled(eventData) {
        console.log(`Releasing inventory for cancelled order ${eventData.orderId}`);
        // –õ–æ–≥–∏–∫–∞ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
    }
}

// Application Setup
async function main() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    const eventPublisher = new EventPublisher('amqp://localhost');
    await eventPublisher.connect();
    
    const eventConsumer = new EventConsumer('amqp://localhost');
    
    const orderService = new OrderService(eventPublisher);
    const notificationService = new NotificationService();
    const inventoryService = new InventoryService();
    
    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
    eventConsumer.registerHandler('order.created', notificationService.handleOrderCreated.bind(notificationService));
    eventConsumer.registerHandler('order.created', inventoryService.handleOrderCreated.bind(inventoryService));
    eventConsumer.registerHandler('order.confirmed', notificationService.handleOrderConfirmed.bind(notificationService));
    eventConsumer.registerHandler('order.shipped', notificationService.handleOrderShipped.bind(notificationService));
    
    // –ó–∞–ø—É—Å–∫ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è —Å–æ–±—ã—Ç–∏–π
    await eventConsumer.consumeEvents();
    
    // –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    const newOrder = await orderService.createOrder({
        customerId: 'cust_123',
        items: [{ productId: 'prod_456', quantity: 2, price: 29.99 }],
        totalAmount: 59.98
    });
    
    console.log('Created order:', newOrder);
    
    // –î—Ä—É–≥–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏...
    await orderService.confirmOrder(newOrder.id);
    await orderService.shipOrder(newOrder.id);
}

// Graceful shutdown
process.on('SIGTERM', async () => {
    console.log('Shutting down gracefully...');
    // –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ª–æ–≥–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
    process.exit(0);
});

main().catch(console.error);
```

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: E-commerce –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å Clean Architecture
```python
# Domain Layer
from dataclasses import dataclass
from typing import List, Optional
from enum import Enum
import uuid
from datetime import datetime

class ProductCategory(Enum):
    ELECTRONICS = "electronics"
    CLOTHING = "clothing"
    BOOKS = "books"
    HOME = "home"

@dataclass
class Product:
    id: str
    name: str
    description: str
    price: float
    category: ProductCategory
    stock_quantity: int
    created_at: datetime = None
    
    def __post_init__(self):
        if self.id is None:
            self.id = str(uuid.uuid4())
        if self.created_at is None:
            self.created_at = datetime.now()
    
    def is_in_stock(self) -> bool:
        return self.stock_quantity > 0
    
    def reduce_stock(self, quantity: int) -> bool:
        if self.stock_quantity >= quantity:
            self.stock_quantity -= quantity
            return True
        return False

@dataclass
class CartItem:
    product: Product
    quantity: int
    
    @property
    def total_price(self) -> float:
        return self.product.price * self.quantity

@dataclass
class ShoppingCart:
    id: str
    customer_id: str
    items: List[CartItem]
    created_at: datetime = None
    
    def __post_init__(self):
        if self.id is None:
            self.id = str(uuid.uuid4())
        if self.created_at is None:
            self.created_at = datetime.now()
    
    def add_item(self, product: Product, quantity: int):
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–æ–≤–∞—Ä–∞
        if not product.is_in_stock():
            raise ValueError("Product is out of stock")
        
        if not product.reduce_stock(quantity):
            raise ValueError("Insufficient stock")
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Ç–∞–∫–æ–π —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω–µ
        for item in self.items:
            if item.product.id == product.id:
                item.quantity += quantity
                return
        
        # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
        self.items.append(CartItem(product, quantity))
    
    def remove_item(self, product_id: str):
        self.items = [item for item in self.items if item.product.id != product_id]
    
    @property
    def total_amount(self) -> float:
        return sum(item.total_price for item in self.items)
    
    def clear(self):
        self.items.clear()

# Application Layer
class ProductService:
    def __init__(self, product_repository):
        self.product_repository = product_repository
    
    def get_product(self, product_id: str) -> Optional[Product]:
        return self.product_repository.find_by_id(product_id)
    
    def search_products(self, query: str, category: ProductCategory = None) -> List[Product]:
        return self.product_repository.search(query, category)
    
    def get_featured_products(self, limit: int = 10) -> List[Product]:
        return self.product_repository.find_featured(limit)

class CartService:
    def __init__(self, cart_repository, product_repository):
        self.cart_repository = cart_repository
        self.product_repository = product_repository
    
    def get_cart(self, customer_id: str) -> ShoppingCart:
        cart = self.cart_repository.find_by_customer_id(customer_id)
        if not cart:
            cart = ShoppingCart(id=None, customer_id=customer_id, items=[])
            self.cart_repository.save(cart)
        return cart
    
    def add_to_cart(self, customer_id: str, product_id: str, quantity: int):
        cart = self.get_cart(customer_id)
        product = self.product_repository.find_by_id(product_id)
        
        if not product:
            raise ValueError("Product not found")
        
        cart.add_item(product, quantity)
        self.cart_repository.save(cart)
        return cart
    
    def remove_from_cart(self, customer_id: str, product_id: str):
        cart = self.get_cart(customer_id)
        cart.remove_item(product_id)
        self.cart_repository.save(cart)
        return cart
    
    def checkout(self, customer_id: str) -> dict:
        cart = self.get_cart(customer_id)
        if not cart.items:
            raise ValueError("Cart is empty")
        
        # –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
        order_data = {
            'customer_id': customer_id,
            'items': [
                {
                    'product_id': item.product.id,
                    'quantity': item.quantity,
                    'price': item.product.price
                }
                for item in cart.items
            ],
            'total_amount': cart.total_amount
        }
        
        # –û—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
        cart.clear()
        self.cart_repository.save(cart)
        
        return order_data

# Infrastructure Layer
class MongoProductRepository:
    def __init__(self, database):
        self.collection = database['products']
    
    def find_by_id(self, product_id: str) -> Optional[Product]:
        doc = self.collection.find_one({'_id': product_id})
        if not doc:
            return None
        return self._document_to_product(doc)
    
    def search(self, query: str, category: ProductCategory = None) -> List[Product]:
        filter_query = {
            '$or': [
                {'name': {'$regex': query, '$options': 'i'}},
                {'description': {'$regex': query, '$options': 'i'}}
            ]
        }
        
        if category:
            filter_query['category'] = category.value
        
        docs = self.collection.find(filter_query)
        return [self._document_to_product(doc) for doc in docs]
    
    def find_featured(self, limit: int) -> List[Product]:
        docs = self.collection.find({'featured': True}).limit(limit)
        return [self._document_to_product(doc) for doc in docs]
    
    def _document_to_product(self, doc) -> Product:
        return Product(
            id=doc['_id'],
            name=doc['name'],
            description=doc['description'],
            price=doc['price'],
            category=ProductCategory(doc['category']),
            stock_quantity=doc['stock_quantity'],
            created_at=doc.get('created_at')
        )

class RedisCartRepository:
    def __init__(self, redis_client):
        self.redis = redis_client
    
    def find_by_customer_id(self, customer_id: str) -> Optional[ShoppingCart]:
        cart_data = self.redis.get(f"cart:{customer_id}")
        if not cart_data:
            return None
        
        cart_dict = json.loads(cart_data)
        items = [
            CartItem(
                product=Product(**item['product']),
                quantity=item['quantity']
            )
            for item in cart_dict['items']
        ]
        
        return ShoppingCart(
            id=cart_dict['id'],
            customer_id=cart_dict['customer_id'],
            items=items,
            created_at=datetime.fromisoformat(cart_dict['created_at'])
        )
    
    def save(self, cart: ShoppingCart):
        cart_dict = {
            'id': cart.id,
            'customer_id': cart.customer_id,
            'items': [
                {
                    'product': {
                        'id': item.product.id,
                        'name': item.product.name,
                        'price': item.product.price
                    },
                    'quantity': item.quantity
                }
                for item in cart.items
            ],
            'created_at': cart.created_at.isoformat()
        }
        
        self.redis.setex(
            f"cart:{cart.customer_id}",
            3600,  # 1 hour expiration
            json.dumps(cart_dict)
        )

# Presentation Layer (FastAPI)
from fastapi import FastAPI, HTTPException
from pydantic import BaseModel
from typing import List, Optional

app = FastAPI(title="E-commerce API")

# Dependency injection setup
def get_product_service():
    # –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
    pass

def get_cart_service():
    pass

# Pydantic models for API
class ProductResponse(BaseModel):
    id: str
    name: str
    description: str
    price: float
    category: str
    stock_quantity: int

class AddToCartRequest(BaseModel):
    product_id: str
    quantity: int

@app.get("/products/{product_id}", response_model=ProductResponse)
async def get_product(product_id: str, service: ProductService = Depends(get_product_service)):
    product = service.get_product(product_id)
    if not product:
        raise HTTPException(status_code=404, detail="Product not found")
    return product

@app.get("/products", response_model=List[ProductResponse])
async def search_products(
    query: str, 
    category: Optional[str] = None,
    service: ProductService = Depends(get_product_service)
):
    category_enum = ProductCategory(category) if category else None
    products = service.search_products(query, category_enum)
    return products

@app.post("/cart/add")
async def add_to_cart(
    request: AddToCartRequest,
    customer_id: str,
    service: CartService = Depends(get_cart_service)
):
    try:
        cart = service.add_to_cart(customer_id, request.product_id, request.quantity)
        return {"message": "Item added to cart", "total_items": len(cart.items)}
    except ValueError as e:
        raise HTTPException(status_code=400, detail=str(e))

@app.get("/cart")
async def get_cart(
    customer_id: str,
    service: CartService = Depends(get_cart_service)
):
    cart = service.get_cart(customer_id)
    return {
        "items": [
            {
                "product_id": item.product.id,
                "product_name": item.product.name,
                "quantity": item.quantity,
                "total_price": item.total_price
            }
            for item in cart.items
        ],
        "total_amount": cart.total_amount
    }

@app.post("/cart/checkout")
async def checkout(
    customer_id: str,
    service: CartService = Depends(get_cart_service)
):
    try:
        order_data = service.checkout(customer_id)
        return {"message": "Checkout successful", "order": order_data}
    except ValueError as e:
        raise HTTPException(status_code=400, detail=str(e))
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –í—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

```python
# –ú–∞—Ç—Ä–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
ARCHITECTURE_MATRIX = {
    'simple_crud_app': ['MVC', 'MVVM'],
    'complex_business_logic': ['Clean Architecture', 'Onion Architecture'],
    'high_scalability': ['Microservices', 'Event-Driven'],
    'real_time_systems': ['Event-Driven', 'Microservices'],
    'enterprise_applications': ['Clean Architecture', 'Hexagonal'],
    'mobile_apps': ['MVVM', 'MVP'],
    'web_applications': ['MVC', 'Clean Architecture']
}

def select_architecture(project_requirements):
    """–í—ã–±–æ—Ä –ø–æ–¥—Ö–æ–¥—è—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π"""
    scores = {}
    
    for arch_type, suitable_projects in ARCHITECTURE_MATRIX.items():
        score = 0
        for requirement in project_requirements:
            if requirement in suitable_projects:
                score += 1
        scores[arch_type] = score
    
    return max(scores.items(), key=lambda x: x[1])[0]

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
requirements = ['complex_business_logic', 'enterprise_applications', 'high_scalability']
recommended_arch = select_architecture(requirements)
print(f"–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: {recommended_arch}")
```

### 2. SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:

```java
// Single Responsibility Principle
public class UserService {
    private final UserRepository userRepository;
    private final EmailService emailService;
    
    // –¢–æ–ª—å–∫–æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    public User createUser(CreateUserRequest request) {
        // –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        User user = new User(request);
        return userRepository.save(user);
    }
}

// Open/Closed Principle
public interface PaymentProcessor {
    boolean processPayment(PaymentRequest request);
}

public class CreditCardProcessor implements PaymentProcessor {
    public boolean processPayment(PaymentRequest request) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫—Ä–µ–¥–∏—Ç–Ω–æ–π –∫–∞—Ä—Ç—ã
        return true;
    }
}

public class PayPalProcessor implements PaymentProcessor {
    public boolean processPayment(PaymentRequest request) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ PayPal
        return true;
    }
}

// Liskov Substitution Principle
public abstract class Shape {
    public abstract double getArea();
}

public class Rectangle extends Shape {
    private double width;
    private double height;
    
    public double getArea() {
        return width * height;
    }
}

public class Circle extends Shape {
    private double radius;
    
    public double getArea() {
        return Math.PI * radius * radius;
    }
}

// Interface Segregation Principle
public interface Readable {
    String read();
}

public interface Writable {
    void write(String data);
}

public class FileReader implements Readable {
    public String read() {
        // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞
        return "file content";
    }
}

public class FileWriter implements Writable {
    public void write(String data) {
        // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª
    }
}

// Dependency Inversion Principle
public interface NotificationService {
    void sendNotification(String message);
}

public class EmailNotificationService implements NotificationService {
    public void sendNotification(String message) {
        // –û—Ç–ø—Ä–∞–≤–∫–∞ email
    }
}

class UserController {
    private NotificationService notificationService;
    
    // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏, –∞ –Ω–µ –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
    public UserController(NotificationService notificationService) {
        this.notificationService = notificationService;
    }
}
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

```python
import unittest
from unittest.mock import Mock, patch

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MVC
class TestUserController(unittest.TestCase):
    def setUp(self):
        self.mock_model = Mock()
        self.mock_view = Mock()
        self.controller = UserController(self.mock_model, self.mock_view)
    
    def test_show_user_success(self):
        # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–∫–∞
        user_data = {'id': 1, 'name': 'John', 'email': 'john@example.com'}
        self.mock_model.getUserById.return_value = user_data
        
        # –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞
        result = self.controller.showUser(1)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∏
        self.mock_model.getUserById.assert_called_once_with(1)
        self.mock_view.renderUser.assert_called_once_with(user_data)
        self.assertIn('John', result)
    
    def test_show_user_not_found(self):
        self.mock_model.getUserById.return_value = None
        
        result = self.controller.showUser(999)
        
        self.assertEqual(result, "<p>User not found</p>")

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MVVM
class TestProductViewModel(unittest.TestCase):
    def setUp(self):
        self.viewModel = ProductViewModel()
    
    def test_add_product_success(self):
        initial_count = len(self.viewModel.products.value)
        
        self.viewModel.newProductName.value = "Test Product"
        self.viewModel.newProductPrice.value = "99.99"
        self.viewModel.addProduct()
        
        self.assertEqual(len(self.viewModel.products.value), initial_count + 1)
        self.assertEqual(self.viewModel.newProductName.value, "")
        self.assertEqual(self.viewModel.newProductPrice.value, "")
    
    def test_add_product_validation(self):
        # –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—É—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
        self.viewModel.newProductName.value = ""
        self.viewModel.newProductPrice.value = "99.99"
        
        initial_count = len(self.viewModel.products.value)
        self.viewModel.addProduct()
        
        self.assertEqual(len(self.viewModel.products.value), initial_count)

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
class TestFullArchitecture(unittest.TestCase):
    def test_user_registration_flow(self):
        # –¢–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        with patch('app.repositories.UserRepository') as mock_repo:
            mock_repo_instance = Mock()
            mock_repo.return_value = mock_repo_instance
            
            # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–∫–∞
            mock_user = User(id=1, name="John", email="john@example.com")
            mock_repo_instance.save.return_value = mock_user
            mock_repo_instance.findByEmail.return_value = None
            
            # –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
            user_service = UserService(mock_repo_instance)
            
            # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
            result = user_service.register_user(
                name="John",
                email="john@example.com",
                password="password123"
            )
            
            # –ü—Ä–æ–≤–µ—Ä–∫–∏
            self.assertEqual(result.id, 1)
            self.assertEqual(result.name, "John")
            mock_repo_instance.save.assert_called_once()

if __name__ == '__main__':
    unittest.main()
```

### 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:

```python
import time
import functools
from typing import Callable, Any

# –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
def monitor_performance(func: Callable) -> Callable:
    @functools.wraps(func)
    def wrapper(*args, **kwargs) -> Any:
        start_time = time.time()
        
        try:
            result = func(*args, **kwargs)
            execution_time = time.time() - start_time
            
            # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
            print(f"{func.__name__} executed in {execution_time:.4f} seconds")
            
            # –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
            send_metric(f"{func.__name__}_duration", execution_time)
            send_metric(f"{func.__name__}_success", 1)
            
            return result
        except Exception as e:
            execution_time = time.time() - start_time
            print(f"{func.__name__} failed after {execution_time:.4f} seconds: {e}")
            
            send_metric(f"{func.__name__}_duration", execution_time)
            send_metric(f"{func.__name__}_failure", 1)
            raise
    
    return wrapper

def send_metric(metric_name: str, value: float):
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞"""
    # –ó–¥–µ—Å—å –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prometheus, Datadog –∏ —Ç.–¥.
    print(f"Metric sent: {metric_name} = {value}")

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞
@monitor_performance
class MonitoredUserService:
    def __init__(self, repository):
        self.repository = repository
    
    @monitor_performance
    def get_user_by_id(self, user_id: int):
        return self.repository.find_by_id(user_id)
    
    @monitor_performance
    def create_user(self, user_data: dict):
        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        user = User(**user_data)
        return self.repository.save(user)

# Health check –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
from flask import Flask, jsonify

app = Flask(__name__)

class HealthChecker:
    def __init__(self, db_connection, external_services):
        self.db_connection = db_connection
        self.external_services = external_services
    
    def check_database(self):
        try:
            self.db_connection.execute("SELECT 1")
            return True, "Database connection OK"
        except Exception as e:
            return False, f"Database connection failed: {str(e)}"
    
    def check_external_services(self):
        results = {}
        for service_name, service_url in self.external_services.items():
            try:
                response = requests.get(f"{service_url}/health", timeout=5)
                results[service_name] = response.status_code == 200
            except Exception as e:
                results[service_name] = False
        return results
    
    def get_health_status(self):
        db_ok, db_message = self.check_database()
        external_status = self.check_external_services()
        
        overall_status = "healthy" if db_ok and all(external_status.values()) else "unhealthy"
        
        return {
            "status": overall_status,
            "database": {
                "status": "healthy" if db_ok else "unhealthy",
                "message": db_message
            },
            "external_services": external_status,
            "timestamp": datetime.utcnow().isoformat()
        }

@app.route('/health')
def health_check():
    health_checker = HealthChecker(db_connection, {
        'auth_service': 'http://auth-service:8080',
        'payment_service': 'http://payment-service:8081'
    })
    
    health_status = health_checker.get_health_status()
    status_code = 200 if health_status['status'] == 'healthy' else 503
    
    return jsonify(health_status), status_code
```

### 5. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

```python
# Security Layer Implementation
from functools import wraps
from flask import request, jsonify
import jwt
from datetime import datetime, timedelta

class SecurityService:
    def __init__(self, secret_key):
        self.secret_key = secret_key
    
    def generate_token(self, user_id, roles=None):
        payload = {
            'user_id': user_id,
            'roles': roles or [],
            'exp': datetime.utcnow() + timedelta(hours=24)
        }
        return jwt.encode(payload, self.secret_key, algorithm='HS256')
    
    def verify_token(self, token):
        try:
            payload = jwt.decode(token, self.secret_key, algorithms=['HS256'])
            return payload
        except jwt.ExpiredSignatureError:
            raise Exception("Token expired")
        except jwt.InvalidTokenError:
            raise Exception("Invalid token")
    
    def has_role(self, token_payload, required_role):
        return required_role in token_payload.get('roles', [])

# Decorators for authorization
def require_auth(security_service):
    def decorator(f):
        @wraps(f)
        def decorated_function(*args, **kwargs):
            token = request.headers.get('Authorization')
            if not token:
                return jsonify({'error': 'Authorization token required'}), 401
            
            try:
                payload = security_service.verify_token(token)
                request.current_user = payload
            except Exception as e:
                return jsonify({'error': str(e)}), 401
            
            return f(*args, **kwargs)
        return decorated_function
    return decorator

def require_role(security_service, role):
    def decorator(f):
        @wraps(f)
        def decorated_function(*args, **kwargs):
            if not hasattr(request, 'current_user'):
                return jsonify({'error': 'Authentication required'}), 401
            
            if not security_service.has_role(request.current_user, role):
                return jsonify({'error': f'Role {role} required'}), 403
            
            return f(*args, **kwargs)
        return decorated_function
    return decorator

# Secure API implementation
security_service = SecurityService('your-secret-key')

@app.route('/api/admin/users', methods=['GET'])
@require_auth(security_service)
@require_role(security_service, 'admin')
def get_users():
    # –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    users = user_service.get_all_users()
    return jsonify(users)

@app.route('/api/profile', methods=['GET'])
@require_auth(security_service)
def get_profile():
    # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
    user_id = request.current_user['user_id']
    user = user_service.get_user_by_id(user_id)
    return jsonify(user.to_dict())

# Input validation and sanitization
class InputValidator:
    @staticmethod
    def validate_user_input(data):
        errors = []
        
        # –í–∞–ª–∏–¥–∞—Ü–∏—è email
        if 'email' in data:
            if not re.match(r'^[^@]+@[^@]+\.[^@]+$', data['email']):
                errors.append('Invalid email format')
        
        # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫
        if 'username' in data:
            if len(data['username']) < 3 or len(data['username']) > 50:
                errors.append('Username must be 3-50 characters')
        
        # –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        sanitized_data = {}
        for key, value in data.items():
            if isinstance(value, str):
                # –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
                sanitized_data[key] = value.strip().replace('<', '&lt;').replace('>', '&gt;')
            else:
                sanitized_data[key] = value
        
        return sanitized_data, errors

# Rate limiting
from collections import defaultdict
class RateLimiter:
    def __init__(self, max_requests=100, window_seconds=3600):
        self.max_requests = max_requests
        self.window_seconds = window_seconds
        self.requests = defaultdict(list)
    
    def is_allowed(self, client_id):
        now = time.time()
        # –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π
        self.requests[client_id] = [
            req_time for req_time in self.requests[client_id]
            if now - req_time < self.window_seconds
        ]
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞
        if len(self.requests[client_id]) >= self.max_requests:
            return False
        
        # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
        self.requests[client_id].append(now)
        return True

rate_limiter = RateLimiter(max_requests=1000, window_seconds=3600)

@app.before_request
def rate_limit():
    client_ip = request.remote_addr
    if not rate_limiter.is_allowed(client_ip):
        return jsonify({'error': 'Rate limit exceeded'}), 429
```

---

#### üíº –ê–≤—Ç–æ—Ä: –î—É–ø–ª–µ–π –ú–∞–∫—Å–∏–º –ò–≥–æ—Ä–µ–≤–∏—á

### üì≤ –ö–æ–Ω—Ç–∞–∫—Ç—ã:

- **Telegram ‚Ññ1:** [@quadd4rv1n7](https://t.me/quadd4rv1n7)
- **Telegram ‚Ññ2:** [@dupley_maxim_1999](https://t.me/dupley_maxim_1999)

üìÖ **–î–∞—Ç–∞:** 26.01.2026

‚ñ∂Ô∏è –í–µ—Ä—Å–∏—è 1.0

---
> üìß **–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤—É:** maksimqwe42@mail.ru

---

### üíº –ü—Ä–æ—Ñ–∏–ª—å –Ω–∞ Profi.ru
[![Profi.ru Profile](https://img.shields.io/badge/Profi.ru-–î—É–ø–ª–µ–π%20–ú.–ò.-FF6B35?style=for-the-badge)](https://profi.ru/profile/DupleyMI)

> –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∏ —É—Å–ª—É–≥–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ Profi.ru

---

### üìö –£—Å–ª—É–≥–∏ –æ–±—É—á–µ–Ω–∏—è
[![–û–±—É—á–µ–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º –∏ —è–∑—ã–∫–∞–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ Kwork](https://img.shields.io/badge/Kwork-–û–±—É—á–µ–Ω–∏–µ%20–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é-blue?style=for-the-badge&logo=kwork)](https://kwork.ru/usability-testing/42465951/–æ–±—É—á–µ–Ω–∏–µ-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º-–∏-—è–∑—ã–∫–∞–º-–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è)

> –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º –∏ —è–∑—ã–∫–∞–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∏ –∫—É—Ä—Å—ã –æ—Ç –æ–ø—ã—Ç–Ω–æ–≥–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è.

---

### üè´ –û —à–∫–æ–ª–µ
[![Website](https://img.shields.io/badge/Maestro7IT-school--maestro7it.ru-darkgreen?style=for-the-badge)](https://school-maestro7it.ru/)

> –ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–∞—è —à–∫–æ–ª–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∞—è—Å—è –Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –≤ –æ–±–ª–∞—Å—Ç–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –∏ —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.
