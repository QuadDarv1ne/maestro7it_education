"""
Автор: Дуплей Максим Игоревич - AGLA
ORCID: https://orcid.org/0009-0007-7605-539X
GitHub: https://github.com/QuadDarv1ne/

Полезные ссылки:
1. Telegram ❃ Хижина программиста Æ: https://t.me/hut_programmer_07
2. Telegram №1 @quadd4rv1n7
3. Telegram №2 @dupley_maxim_1999
4. Rutube канал: https://rutube.ru/channel/4218729/
5. Plvideo канал: https://plvideo.ru/channel/AUPv_p1r5AQJ
6. YouTube канал: https://www.youtube.com/@it-coders
7. ВК группа: https://vk.com/science_geeks
"""

"""
Решение задачи LeetCode: Number of Steps to Reduce a Number in Binary Representation to One

Ссылка: https://leetcode.com/problems/number-of-steps-to-reduce-a-number-in-binary-representation-to-one/

================================================================================
УСЛОВИЕ ЗАДАЧИ
================================================================================

Дано двоичное представление целого числа в виде строки s. Необходимо вернуть
количество шагов, чтобы привести число к 1 по следующим правилам:

    1. Если текущее число чётное, нужно разделить его на 2.
    2. Если текущее число нечётное, нужно добавить к нему 1.

Гарантируется, что для всех тестовых случаев можно достичь единицы.

================================================================================
ПРИМЕРЫ
================================================================================

Пример 1:
    Вход: s = "1101"
    Выход: 6
    Пояснение: "1101" соответствует числу 13 в десятичной системе.
    Шаг 1) 13 нечётное, добавляем 1 → 14
    Шаг 2) 14 чётное, делим на 2 → 7
    Шаг 3) 7 нечётное, добавляем 1 → 8
    Шаг 4) 8 чётное, делим на 2 → 4
    Шаг 5) 4 чётное, делим на 2 → 2
    Шаг 6) 2 чётное, делим на 2 → 1

================================================================================
ОГРАНИЧЕНИЯ
================================================================================

    - 1 <= s.length <= 500
    - s состоит только из символов '0' или '1'
    - s[0] == '1' (число не имеет ведущих нулей)

================================================================================
АЛГОРИТМ
================================================================================

Работаем напрямую со строкой без преобразования в число:
    - Бит '0': 1 шаг (деление на 2)
    - Бит '1': 2 шага (добавление 1 + деление на 2) с переносом

Временная сложность: O(n)
Пространственная сложность: O(1)
"""


class Solution:
    """
    Класс решения задачи о количестве шагов для приведения двоичного числа к 1.
    """
    
    def numSteps(self, s):
        """
        Вычисляет количество шагов для приведения двоичного числа к единице.
        
        Алгоритм проходит по битам справа налево и подсчитывает необходимые
        операции, учитывая перенос при обработке единиц.
        
        Args:
            s: Двоичное представление числа в виде строки.
        
        Returns:
            Количество шагов для приведения числа к 1.
        
        Examples:
            >>> Solution().numSteps("1101")
            6
            >>> Solution().numSteps("10")
            1
            >>> Solution().numSteps("1")
            0
        """
        steps = 0
        carry = 0
        
        # Проходим справа налево, начиная с предпоследнего бита
        for i in range(len(s) - 1, 0, -1):
            current_bit = int(s[i]) + carry
            
            if current_bit == 0:
                # Бит 0: просто делим на 2
                steps += 1
            elif current_bit == 1:
                # Бит 1: добавляем 1, затем делим
                steps += 2
                carry = 1
            else:  # current_bit == 2
                # После переноса имеем 0 с новым переносом
                steps += 1
                carry = 1
        
        # Обрабатываем старший бит с учётом переноса
        return steps + carry