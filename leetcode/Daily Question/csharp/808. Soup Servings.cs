/**
 * https://leetcode.com/problems/soup-servings/description/?envType=daily-question&envId=2025-08-08
 */

/// <summary>
/// –í—ã—á–∏—Å–ª—è–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ç–æ–≥–æ, —á—Ç–æ —Å—É–ø A –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è —Ä–∞–Ω—å—à–µ —Å—É–ø–∞ B
/// –ø–ª—é—Å –ø–æ–ª–æ–≤–∏–Ω–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏, —á—Ç–æ –æ–Ω–∏ –∑–∞–∫–æ–Ω—á–∞—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
/// 
/// –£—Å–ª–æ–≤–∏–µ:
/// - –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –µ—Å—Ç—å n –º–ª —Å—É–ø–∞ A –∏ n –º–ª —Å—É–ø–∞ B.
/// - –ù–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –æ–¥–Ω–∞ –∏–∑ 4 –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ä–∞–≤–Ω–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é (0.25):
///   1) A -= 100, B -= 0
///   2) A -= 75,  B -= 25
///   3) A -= 50,  B -= 50
///   4) A -= 25,  B -= 75
/// - –ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ–º–æ–≥–æ –æ–±—ä—ë–º–∞ –Ω–µ—Ç, –ø–æ–¥–∞—ë—Ç—Å—è –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ.
/// - –ü—Ä–æ—Ü–µ—Å—Å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –≤–∏–¥ —Å—É–ø–∞ –∑–∞–∫–æ–Ω—á–∏–ª—Å—è.
/// 
/// –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
/// - –ü–æ—Ä—Ü–∏–∏ –∫—Ä–∞—Ç–Ω—ã 25 –º–ª, –ø–æ—ç—Ç–æ–º—É n –º–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –¥–æ m = ceil(n / 25).
/// - –î–ª—è –±–æ–ª—å—à–∏—Ö n (> 4800) –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å ‚âà 1, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º 1.0.
/// 
/// –ê–ª–≥–æ—Ä–∏—Ç–º:
/// - –†–µ–∫—É—Ä—Å–∏—è —Å –º–µ–º–æ–∏–∑–∞—Ü–∏–µ–π (DFS) –¥–ª—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π (a, b).
/// - –°–ª—É—á–∞–∏:
///   * a <= 0 && b <= 0 ‚Üí –≤–µ—Ä–Ω—É—Ç—å 0.5
///   * a <= 0 ‚Üí –≤–µ—Ä–Ω—É—Ç—å 1.0
///   * b <= 0 ‚Üí –≤–µ—Ä–Ω—É—Ç—å 0.0
/// 
/// </summary>
/// <param name="n">–ù–∞—á–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–ª–ª–∏–ª–∏—Ç—Ä–æ–≤ –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–∞ —Å—É–ø–∞ (0 ‚â§ n ‚â§ 1e9)</param>
/// <returns>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ 1e-5</returns>
public class Solution
{
    private double[,] memo;
    public double SoupServings(int n)
    {
        if (n > 4800) return 1.0;
        int m = (n + 24) / 25;
        memo = new double[m + 1, m + 1];
        return Dfs(m, m);
    }
    private double Dfs(int a, int b)
    {
        if (a <= 0 && b <= 0) return 0.5;
        if (a <= 0) return 1.0;
        if (b <= 0) return 0.0;
        if (memo[a, b] > 0) return memo[a, b];
        double res = 0.25 * (Dfs(a - 4, b) + Dfs(a - 3, b - 1) + Dfs(a - 2, b - 2) + Dfs(a - 1, b - 3));
        memo[a, b] = res;
        return res;
    }
}

/*
''' –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏: '''
# 1. üí†Telegramüí†‚ùÉ –•–∏–∂–∏–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ √Ü: https://t.me/hut_programmer_07
# 2. üí†Telegram ‚Ññ1üí† @quadd4rv1n7
# 3. üí†Telegram ‚Ññ2üí† @dupley_maxim_1999
# 4. Rutube –∫–∞–Ω–∞–ª: https://rutube.ru/channel/4218729/
# 5. Plvideo –∫–∞–Ω–∞–ª: https://plvideo.ru/channel/AUPv_p1r5AQJ
# 6. YouTube –∫–∞–Ω–∞–ª: https://www.youtube.com/@it-coders
# 7. –í–ö –≥—Ä—É–ø–ø–∞: https://vk.com/science_geeks
*/