'''
https://leetcode.com/problems/soup-servings/description/?envType=daily-question&envId=2025-08-08
'''

class Solution:
    def soupServings(self, n: int) -> float:
        """
        –í—ã—á–∏—Å–ª—è–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ç–æ–≥–æ, —á—Ç–æ —Å—É–ø A –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è —Ä–∞–Ω—å—à–µ —Å—É–ø–∞ B,
        –ø–ª—é—Å –ø–æ–ª–æ–≤–∏–Ω–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏, —á—Ç–æ –æ–Ω–∏ –∑–∞–∫–æ–Ω—á–∞—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

        –ò–¥–µ—è:
        - –ü–æ—Ä—Ü–∏–∏ –∫—Ä–∞—Ç–Ω—ã 25 –º–ª ‚Üí –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º: m = ceil(n/25) = (n + 24) // 25.
        - –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π DFS —Å –º–µ–º–æ–∏–∑–∞—Ü–∏–µ–π –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º (a, b) ‚Äî —Å–∫–æ–ª—å–∫–æ ¬´—á–µ—Ç–≤–µ—Ä—Ç—É—à–µ–∫¬ª (–ø–æ 25 –º–ª) –æ—Å—Ç–∞–ª–æ—Å—å.
        - –ë–∞–∑—ã:
            * a <= 0 –∏ b <= 0 ‚Üí 0.5
            * a <= 0 ‚Üí 1.0
            * b <= 0 ‚Üí 0.0
        - –ü–µ—Ä–µ—Ö–æ–¥:
            dfs(a,b) = 0.25 * [ dfs(a-4,b) + dfs(a-3,b-1) + dfs(a-2,b-2) + dfs(a-1,b-3) ]
        - –î–ª—è –±–æ–ª—å—à–∏—Ö n (‚âà > 4800) –æ—Ç–≤–µ—Ç —Å—Ç—Ä–µ–º–∏—Ç—Å—è –∫ 1.0 ‚Üí –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –≤–µ—Ä–Ω—É—Ç—å 1.0.

        :param n: –º–∏–ª–ª–∏–ª–∏—Ç—Ä—ã –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–∞ —Å—É–ø–∞ (0 ‚â§ n ‚â§ 1e9)
        :return: –∏—Å–∫–æ–º–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å (–ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å ‚â§ 1e-5)
        """
        if n > 4800:
            return 1.0

        m = (n + 24) // 25  # ceil(n/25) –±–µ–∑ –∏–º–ø–æ—Ä—Ç–æ–≤
        memo = {}

        def dfs(a: int, b: int) -> float:
            if a <= 0 and b <= 0:
                return 0.5
            if a <= 0:
                return 1.0
            if b <= 0:
                return 0.0
            key = (a, b)
            if key in memo:
                return memo[key]
            res = 0.25 * (
                dfs(a - 4, b) +
                dfs(a - 3, b - 1) +
                dfs(a - 2, b - 2) +
                dfs(a - 1, b - 3)
            )
            memo[key] = res
            return res

        return dfs(m, m)

''' –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏: '''
# 1. üí†Telegramüí†‚ùÉ –•–∏–∂–∏–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ √Ü: https://t.me/hut_programmer_07
# 2. üí†Telegram ‚Ññ1üí† @quadd4rv1n7
# 3. üí†Telegram ‚Ññ2üí† @dupley_maxim_1999
# 4. Rutube –∫–∞–Ω–∞–ª: https://rutube.ru/channel/4218729/
# 5. Plvideo –∫–∞–Ω–∞–ª: https://plvideo.ru/channel/AUPv_p1r5AQJ
# 6. YouTube –∫–∞–Ω–∞–ª: https://www.youtube.com/@it-coders
# 7. –í–ö –≥—Ä—É–ø–ø–∞: https://vk.com/science_geeks